{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"analyzer.html","title":"Analyzers","text":"\ud83d\udd0d Analyzer Scripts <p>This directory (Scripts/analyzer/) contains analysis tools for structure files, simulation data, and dataset quality control. These scripts help validate, filter, and understand molecular dynamics data and training sets.</p> <p>Script Location: <code>Scripts/analyzer/</code></p> <p>This section covers the analyzer tools in GPUMDkit (Interactive Mode - Option 5).</p> <p>The analyzer scripts provide functionality for:</p> <ul> <li>Energy, force, and virial range analysis</li> <li>Minimum distance calculations (with/without periodic boundary conditions)</li> <li>Structure filtering by various criteria (distance, box size, property values)</li> <li>Composition analysis of multi-component systems</li> <li>Time estimation for GPUMD and NEP calculations</li> <li>Dataset quality checks and outlier detection</li> </ul>"},{"location":"analyzer.html#interactive-mode","title":"Interactive Mode","text":"<pre><code>gpumdkit.sh\n# Select: 5) Analyzer\n</code></pre> <p>You'll see the following menu:</p> <pre><code> ------------&gt;&gt;\n 501) Analyze composition of extxyz\n 502) Find outliers of extxyz\n 000) Return to the main menu\n ------------&gt;&gt;\n</code></pre> <p>for <code>501</code>:</p> <pre><code> &gt;-------------------------------------------------&lt;\n | This function calls the script in analyzer      |\n | Script: analyze_composition.py                  |\n | Developer: Zihan YAN (yanzihan@westlake.edu.cn) |\n &gt;-------------------------------------------------&lt;\n Input &lt;input.xyz&gt; you want to analyze\n Examp: train.xyz\n ------------&gt;&gt;\n</code></pre> <p>for <code>502</code>:</p> <pre><code> &gt;-------------------------------------------------&lt;\n | This function calls the script in analyzer      |\n | Script: find_outliers.py                        |\n | Developer: Zihan YAN (yanzihan@westlake.edu.cn) |\n &gt;-------------------------------------------------&lt;\n Input the threshold of RMSE to identify outliers\n ---------------------------------------------------\n Enter energy RMSE threshold (meV/atom): 1\n Enter force RMSE threshold (meV/\u00c5): 60\n Enter stress RMSE threshold (GPa): 0.03\n</code></pre> <p>Follow the prompts to complete the function.</p>"},{"location":"analyzer.html#command-line-mode","title":"Command-Line Mode","text":"<pre><code>gpumdkit.sh -range &lt;file.xyz&gt; &lt;property&gt;\ngpumdkit.sh -min_dist &lt;file.xyz&gt;\ngpumdkit.sh -min_dist_pbc &lt;file.xyz&gt;\ngpumdkit.sh -filter_value &lt;file.xyz&gt; &lt;property&gt; &lt;threshold&gt;\ngpumdkit.sh -filter_dist &lt;file.xyz&gt; &lt;min_dist&gt;\ngpumdkit.sh -filter_box &lt;file.xyz&gt; &lt;box_limit&gt;\ngpumdkit.sh -analyze_comp &lt;file.xyz&gt;\ngpumdkit.sh -time gpumd\ngpumdkit.sh -time nep\n</code></pre>"},{"location":"analyzer.html#scripts","title":"Scripts","text":""},{"location":"analyzer.html#analyze_compositionpy","title":"analyze_composition.py","text":"<p>This script analyze the composition of your <code>extxyz</code> file.</p>"},{"location":"analyzer.html#usage","title":"Usage","text":"<pre><code>python analyze_composition.py &lt;extxyz&gt;\n</code></pre>"},{"location":"analyzer.html#command-line-mode-example","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -analyze_comp train.xyz\n</code></pre>"},{"location":"analyzer.html#output","title":"Output","text":"<pre><code> Calling script by Zihan YAN\n Code path: /d/Westlake/GPUMD/Gpumdkit/Scripts/analyzer/analyze_composition.py\n Index    Compositions           N atoms      Count\n ---------------------------------------------------\n 1        Li56O96Zr16La24        192          51\n ---------------------------------------------------\n Enter index to export (e.g., '1,2', '2-3', 'all'), or press Enter to skip:\n</code></pre>"},{"location":"analyzer.html#charge_balance_checkpy","title":"charge_balance_check.py","text":"<p>This script can be used to check the charge balance status of your <code>extxyz</code> file.</p>"},{"location":"analyzer.html#usage_1","title":"Usage","text":"<pre><code>python charge_balance_check.py &lt;extxyz&gt;\n</code></pre>"},{"location":"analyzer.html#command-line-mode-example_1","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -cbc train.xyz\n</code></pre>"},{"location":"analyzer.html#output_1","title":"Output","text":"<pre><code> Calling script by Zihan YAN\nComputing compositions: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 51/51 [00:03&lt;00:00, 13.03it/s]\nChecking oxidation states: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:03&lt;00:00,  3.67s/it]\n</code></pre> <p>Finally, you will get a <code>balanced.xyz</code> and <code>indices.txt</code> file.</p>"},{"location":"analyzer.html#energy_force_virial_analyzerpy","title":"energy_force_virial_analyzer.py","text":"<p>This script calculates and visualizes the range of properties (such as energy, forces, and virial) from the <code>extxyz</code> file.</p>"},{"location":"analyzer.html#usage_2","title":"Usage","text":"<p>The script requires at least two arguments:</p> <ul> <li>The filename of the <code>extxyz</code> file.</li> <li>The name of the property to analyze (<code>energy</code>, <code>force</code>, or <code>virial</code>).</li> </ul> <p>An optional third argument (<code>hist</code>) can be provided to generate a histogram plot of the values.</p> <pre><code>python energy_force_virial_analyzer.py &lt;filename&gt; &lt;property&gt; [hist]\n</code></pre>"},{"location":"analyzer.html#example","title":"Example","text":"<pre><code>python energy_force_virial_analyzer.py train.xyz force\n</code></pre>"},{"location":"analyzer.html#command-line-mode-example_2","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -range train.xyz force\n</code></pre>"},{"location":"analyzer.html#output_2","title":"Output","text":"<pre><code>Force range: 0.03210566767721861 to 9.230115912468435\n</code></pre> <p>If you add the <code>[hist]</code> option, it will calculate the range of forces and display a histogram:</p> <pre><code>python energy_force_virial_analyzer.py train.xyz force hist\n</code></pre>"},{"location":"analyzer.html#filter_dist_rangepy","title":"filter_dist_range.py","text":"<p>This script is used to extract the structures with specified <code>min_dist</code>.</p>"},{"location":"analyzer.html#usage_3","title":"Usage","text":"<pre><code>python filter_dist_range.py &lt;input.xyz&gt; &lt;element1&gt; &lt;element2&gt; &lt;min_dist&gt; &lt;max_dist&gt;\n</code></pre>"},{"location":"analyzer.html#example_1","title":"Example","text":"<pre><code>python filter_dist_range.py dump.xyz Li Li 1.8 2.0\n</code></pre>"},{"location":"analyzer.html#command-line-mode-example_3","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -filter_range dump.xyz Li Li 1.9 2.0\n</code></pre> <p>This means you need to extract the structures with the <code>min_dist</code> of Li-Li in the range of 1.8-2.0 in <code>dump.xyz</code> file. Finally, the <code>filtered_Li_Li_1.8_2.0.xyz</code> file will be generated.</p>"},{"location":"analyzer.html#get_min_distpy","title":"get_min_dist.py","text":"<p>This script is used to calculate the min_dist of the structures.</p>"},{"location":"analyzer.html#usage_4","title":"Usage","text":"<pre><code>python get_min_dist.py &lt;extxyz_file&gt;\n</code></pre>"},{"location":"analyzer.html#example_2","title":"Example","text":"<pre><code>python get_min_dist.py dump.xyz\n</code></pre>"},{"location":"analyzer.html#command-line-mode-example_4","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -min_dist dump.xyz\n</code></pre>"},{"location":"analyzer.html#output_3","title":"Output","text":"<pre><code> Calling script by Zihan YAN\n Code path: /d/Westlake/GPUMD/Gpumdkit/Scripts/analyzer/get_min_dist.py\n +---------------------------+\n |   PBC ignored for speed   |\n | use -min_dist_pbc for PBC |\n +---------------------------+\n Minimum interatomic distances:\n +---------------------------+\n | Atom Pair |  Distance (\u00c5) |\n +---------------------------+\n |   Li-Li   |     1.696     |\n |   Li-La   |     2.498     |\n |   Li-Zr   |     2.506     |\n |   Li-O    |     1.587     |\n |   La-La   |     3.463     |\n |   La-Zr   |     3.243     |\n |   La-O    |     2.043     |\n |   Zr-Zr   |     5.060     |\n |   Zr-O    |     1.867     |\n |   O-O     |     2.480     |\n +---------------------------+\n Overall min_distance: 1.587 \u00c5\n</code></pre> <p>NOTE: This script is fast because it does not take into account periodic boundary conditions (PBC), but in some cases it can be problematic.</p>"},{"location":"analyzer.html#get_min_dist_pbcpy","title":"get_min_dist_pbc.py","text":"<p>This script is used to calculate the min_dist of the structures considering the PBC.</p>"},{"location":"analyzer.html#usage_5","title":"Usage","text":"<pre><code>python get_min_dist_pbc.py &lt;extxyz_file&gt;\n</code></pre>"},{"location":"analyzer.html#example_3","title":"Example","text":"<pre><code>python get_min_dist_pbc.py dump.xyz\n</code></pre>"},{"location":"analyzer.html#command-line-mode-example_5","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -min_dist_pbc dump.xyz\n</code></pre>"},{"location":"analyzer.html#output_4","title":"Output","text":"<pre><code> Calling script by Zihan YAN\n Code path: /d/Westlake/GPUMD/Gpumdkit/Scripts/analyzer/get_min_dist_pbc.py\n Minimum interatomic distances (with PBC):\n +---------------------------+\n | Atom Pair |  Distance (\u00c5) |\n +---------------------------+\n |   Li-Li   |     1.696     |\n |   Li-La   |     2.498     |\n |   Li-Zr   |     2.477     |\n |   Li-O    |     1.587     |\n |   La-La   |     3.463     |\n |   La-Zr   |     3.210     |\n |   La-O    |     2.043     |\n |   Zr-Zr   |     5.060     |\n |   Zr-O    |     1.867     |\n |   O-O     |     2.355     |\n +---------------------------+\n Overall min_distance: 1.587 \u00c5\n</code></pre>"},{"location":"analyzer.html#find_outlierspy","title":"find_outliers.py","text":"<p>This script is used to find outliers in training data based on RMSE thresholds for energy, force, and stress.</p>"},{"location":"analyzer.html#usage_6","title":"Usage","text":"<pre><code>python find_outliers.py\n</code></pre>"},{"location":"analyzer.html#interactive-mode_1","title":"Interactive Mode","text":"<pre><code> Input the function number:\n 5\n ------------&gt;&gt;\n 501) Analyze composition of extxyz\n 502) Find outliers of extxyz\n 000) Return to the main menu\n ------------&gt;&gt;\n Input the function number:\n 502\n &gt;-------------------------------------------------&lt;\n | This function calls the script in analyzer      |\n | Script: find_outliers.py                        |\n | Developer: Zihan YAN (yanzihan@westlake.edu.cn) |\n &gt;-------------------------------------------------&lt;\n Input the threshold of RMSE to identify outliers\n ---------------------------------------------------\n Enter energy RMSE threshold (meV/atom): 1\n Enter force RMSE threshold (meV/\u00c5): 60\n Enter stress RMSE threshold (GPa): 0.03\n</code></pre> <p>After that, you will get <code>selected.xyz</code>, <code>remained.xyz</code>, and <code>slected_remained.png</code></p>"},{"location":"analyzer.html#filter_exyz_by_valuepy","title":"filter_exyz_by_value.py","text":"<p>This script filter the structures by min_dist.</p>"},{"location":"analyzer.html#usage_7","title":"Usage","text":"<pre><code>python filter_exyz_by_value.py &lt;extxyz_file&gt; &lt;min_dist&gt;\n</code></pre>"},{"location":"analyzer.html#example_4","title":"Example","text":"<pre><code>python filter_exyz_by_value.py dump.xyz 1.4\n</code></pre>"},{"location":"analyzer.html#command-line-mode-example_6","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -filter_value dump.xyz 1.4\n</code></pre>"},{"location":"analyzer.html#filter_exyz_by_boxpy","title":"filter_exyz_by_box.py","text":"<p>This script filter the structures by box limit.</p>"},{"location":"analyzer.html#usage_8","title":"Usage","text":"<pre><code>python filter_exyz_by_box.py &lt;extxyz_file&gt; &lt;min_dist&gt;\n</code></pre>"},{"location":"analyzer.html#example_5","title":"Example","text":"<pre><code>python filter_exyz_by_box.py dump.xyz 20\n</code></pre>"},{"location":"analyzer.html#command-line-mode-example_7","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -filter_box dump.xyz 20\n</code></pre>"},{"location":"analyzer.html#filter_exyz_by_valuepy_1","title":"filter_exyz_by_value.py","text":"<p>This script filter the structures by specified value.</p>"},{"location":"analyzer.html#usage_9","title":"Usage","text":"<pre><code>python filter_exyz_by_value.py &lt;extxyz_file&gt; &lt;property&gt; &lt;threshold&gt;\n</code></pre> <ul> <li><code>&lt;extxyz_file&gt;</code>: The path to the input <code>extxyz</code> file.</li> <li><code>&lt;property&gt;</code>: Filtering property: <code>energy</code>, <code>force</code>, or <code>virial</code></li> <li><code>&lt;threshold&gt;</code>: Threshold value for filtering</li> </ul>"},{"location":"analyzer.html#example_6","title":"Example","text":"<pre><code>python filter_exyz_by_value.py train.xyz force 20\n</code></pre>"},{"location":"analyzer.html#command-line-mode-example_8","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -filter_value train.xyz force 20\n</code></pre> <p>This command will filter out the structure in <code>train.xyz</code> with a force greater than 20 eV/angstrom.</p>"},{"location":"analyzer.html#time_consuming_gpumdsh","title":"time_consuming_gpumd.sh","text":"<p>This script calculates the remaining time for GPUMD.</p>"},{"location":"analyzer.html#usage_10","title":"Usage","text":"<pre><code>bash time_consuming_gpumd.sh\n</code></pre>"},{"location":"analyzer.html#command-line-mode-example_9","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -time gpumd\n</code></pre>"},{"location":"analyzer.html#output_5","title":"Output","text":"<pre><code> ----------------- System Information ----------------\n total frames: 1050000\n -----------------------------------------------------\n Current Frame  Speed (steps/s)   Total Time       Time Left       Estimated End\n -------------   -------------   -------------   -------------   -----------------\n     13000          499.86         0h 35m 0s      0h 34m 34s    2025-12-27 18:12:04\n     14000          199.93        1h 27m 31s      1h 26m 21s    2025-12-27 19:03:56\n     15000          199.94        1h 27m 31s      1h 26m 16s    2025-12-27 19:03:56\n</code></pre>"},{"location":"analyzer.html#time_consuming_nepsh","title":"time_consuming_nep.sh","text":"<p>This script calculates the remaining time for nep.</p>"},{"location":"analyzer.html#usage_11","title":"Usage","text":"<pre><code>bash time_consuming_nep.sh\n</code></pre>"},{"location":"analyzer.html#command-line-mode-example_10","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -time nep\n</code></pre>"},{"location":"analyzer.html#output_6","title":"Output","text":"<pre><code>+-----------------+-----------+-----------------+---------------------+\n|       Step      | Time Diff |    Time Left    |    Finish Time      |\n+-----------------+-----------+-----------------+---------------------+\n| 6700            | 1 s       | 0 h 15 m 33 s   | 2025-10-23 15:34:11 |\n| 6800            | 2 s       | 0 h 31 m 4 s    | 2025-10-23 15:49:44 |\n| 6900            | 2 s       | 0 h 31 m 2 s    | 2025-10-23 15:49:44 |\n| 7000            | 2 s       | 0 h 31 m 0 s    | 2025-10-23 15:49:44 |\n| 7100            | 3 s       | 0 h 46 m 27 s   | 2025-10-23 16:05:14 |\n</code></pre>"},{"location":"analyzer.html#contributing","title":"Contributing","text":"<p>To add new analyzer scripts, see CONTRIBUTING.md for detailed guidelines.</p> <p>Thank you for using GPUMDkit! If you have questions or need assistance with analyzer scripts, please open an issue on our GitHub repository or contact Zihan YAN (yanzihan@westlake.edu.cn).</p>"},{"location":"calculators.html","title":"Calculators","text":"\ud83e\uddee Calculators <p>This directory (Scripts/calculators/) contains computational tools for calculating various material properties using NEP models and analyzing simulation data.</p> <p>Script Location: <code>Scripts/calculators/</code></p> <p>This section covers the calculator tools in GPUMDkit (Interactive Mode - Option 4).</p> <p>The calculator scripts provide functionality for:</p> <ul> <li>Ionic conductivity and diffusivity calculations</li> <li>Property predictions using NEP models</li> <li>Descriptor calculations for PCA or UMAP analysis</li> <li>Density of atomistic states (DOAS)</li> <li>Nudged elastic band (NEB) calculations</li> <li>Radial distribution function (RDF) calculations</li> </ul>"},{"location":"calculators.html#interactive-mode","title":"Interactive Mode","text":"<pre><code>gpumdkit.sh\n# Select: 4) Calculators\n</code></pre> <p>You'll see the following menu:</p> <pre><code> ------------&gt;&gt;\n 401) Calc ionic conductivity\n 402) Calc properties by nep\n 403) Calc descriptors of specific elements\n 404) Calc density of atomistic states (DOAS)\n 405) Calc nudged elastic band (NEB) by nep\n 000) Return to the main menu\n ------------&gt;&gt;\n Input the function number:\n</code></pre> <p>for <code>401</code>:</p> <pre><code> &gt;-------------------------------------------------&lt;\n | This function calls the script in calculators   |\n | Script: calc_ion_conductivity.py                |\n | Developer: Zihan YAN (yanzihan@westlake.edu.cn) |\n &gt;-------------------------------------------------&lt;\n Input &lt;element&gt; &lt;charge&gt; (eg. Li 1)\n ------------&gt;&gt;\n</code></pre> <p>for <code>402</code>:</p> <pre><code> &gt;-------------------------------------------------&lt;\n | This function calls the script in calculators   |\n | Script: calc_properties_with_nep.py             |\n | Developer: Zihan YAN (yanzihan@westlake.edu.cn) |\n &gt;-------------------------------------------------&lt;\n Input &lt;input.xyz&gt; &lt;output.xyz&gt; &lt;nep_model&gt;\n Examp: input.xyz output.xyz nep.txt\n ------------&gt;&gt;\n</code></pre> <p>for <code>403</code>:</p> <pre><code> &gt;-------------------------------------------------&lt;\n | This function calls the script in calculators   |\n | Script: calc_descriptors.py                     |\n | Developer: Zihan YAN (yanzihan@westlake.edu.cn) |\n &gt;-------------------------------------------------&lt;\n Input &lt;input.xyz&gt; &lt;output.npy&gt; &lt;nep_model&gt; &lt;element&gt;\n Examp: train.xyz des_Li.npy nep.txt Li\n ------------&gt;&gt;\n</code></pre> <p>for <code>404</code>:</p> <pre><code> &gt;-------------------------------------------------&lt;\n | This function calls the script in calculators   |\n | Script: calc_doas.py                            |\n | Developer: Zihan YAN (yanzihan@westlake.edu.cn) |\n &gt;-------------------------------------------------&lt;\n Input &lt;input.xyz&gt; &lt;nep_model&gt; &lt;output_file&gt;\n Examp: dump.xyz nep.txt doas.out\n ------------&gt;&gt;\n</code></pre> <p>for <code>405</code>:</p> <pre><code> &gt;-------------------------------------------------&lt;\n | This function calls the script in calculators   |\n | Script: neb_calculation.py                      |\n | Developer: Zhoulin LIU (1776627910@qq.com)      |\n &gt;-------------------------------------------------&lt;\n Input &lt;initial_struct&gt; &lt;final_struct&gt; &lt;n_image&gt; &lt;nep_model&gt;\n Examp: IS.xyz FS.xyz 5 nep.txt\n ------------&gt;&gt;\n</code></pre> <p>Follow the prompts to complete the function.</p>"},{"location":"calculators.html#command-line-mode","title":"Command-Line Mode","text":"<pre><code>gpumdkit.sh -calc ionic-cond &lt;element&gt; &lt;charge&gt;\ngpumdkit.sh -calc nep &lt;input.xyz&gt; &lt;output.xyz&gt; &lt;nep.txt&gt;\ngpumdkit.sh -calc des &lt;input.xyz&gt; &lt;output.npy&gt; &lt;nep.txt&gt; &lt;element&gt;\ngpumdkit.sh -calc doas &lt;input.xyz&gt; &lt;nep.txt&gt; &lt;output.txt&gt;\n</code></pre>"},{"location":"calculators.html#scripts","title":"Scripts","text":""},{"location":"calculators.html#calc_ion_conductivitypy","title":"calc_ion_conductivity.py","text":"<p>Calculates ionic diffusivity and conductivity from mean square displacement (MSD) data.</p>"},{"location":"calculators.html#input-files","title":"Input Files","text":"<ul> <li><code>msd.out</code> - MSD data from GPUMD (required)</li> <li><code>thermo.out</code> - Temperature data (optional, for automatic temperature detection)</li> <li><code>model.xyz</code> - Structure file (optional, for automatic volume/atom count detection)</li> <li><code>run.in</code> - MD input file (optional, for replicate detection)</li> </ul>"},{"location":"calculators.html#usage","title":"Usage","text":"<p>Command-line mode:</p> <pre><code>gpumdkit.sh -calc ionic-cond &lt;element&gt; &lt;charge&gt;\n</code></pre> <p>Direct execution: <pre><code>python calc_ion_conductivity.py &lt;element&gt; &lt;charge&gt;\n</code></pre></p>"},{"location":"calculators.html#parameters","title":"Parameters","text":"<ul> <li><code>&lt;element&gt;</code>: Chemical species symbol (e.g., Li, Na, O)</li> <li><code>&lt;charge&gt;</code>: Formal charge of the ion (e.g., 1 for Li\u207a, -2 for O\u00b2\u207b)</li> </ul>"},{"location":"calculators.html#examples","title":"Examples","text":"<p>Automatic mode (with thermo.out and model.xyz present):</p> <pre><code>gpumdkit.sh -calc ionic-cond Li 1\n</code></pre> <p>Manual input mode (if files not found): <pre><code>gpumdkit.sh -calc ionic-cond Li 1\n# Script will prompt:\nFiles 'thermo.out' and 'model.xyz' are not found.\nPlease provide the following values:\n---------------------------&gt;\nEnter average temperature (in K): 800\nEnter system volume (in \u00c5^3): 16785\nEnter number of ions: 448\n</code></pre></p>"},{"location":"calculators.html#output","title":"Output","text":"<pre><code>Diffusivity (D):\n  D_x: 4.153e-07 cm^2/s\n  D_y: 4.174e-07 cm^2/s\n  D_z: 2.610e-07 cm^2/s\n  D_total: 3.646e-07 cm^2/s\n------------------------------\nIonic Conductivity:\n  Sigma_x: 2.576e-02 mS/cm\n  Sigma_y: 2.589e-02 mS/cm\n  Sigma_z: 1.619e-02 mS/cm\n  Sigma_total: 2.261e-02 mS/cm\n</code></pre>"},{"location":"calculators.html#calc_properties_with_neppy","title":"calc_properties_with_nep.py","text":"<p>Calculates energies, forces, and stresses for structures using a NEP model. You can provide a clean extxyz file and use a <code>nep.txt</code> to label the reference values for energies, forces, and stresses. </p> <p>Note that you must know what you are doing and this is not a substitute for DFT calculations.</p> <p>Unless you have a well-trained NEP model and you want to use it as a DFT surrogate, you probably shouldn't use this feature. See this article if you are interesting in it.</p>"},{"location":"calculators.html#input-files_1","title":"Input Files","text":"<ul> <li>A clean structure file in <code>extxyz</code> format with energy, force, and virial/stress. </li> </ul> <p>(use <code>gpumdkit.sh -clean_xyz train.xyz</code> to remove the original values)</p> <ul> <li>NEP model file (nep.txt)</li> </ul>"},{"location":"calculators.html#usage_1","title":"Usage","text":"<p>Command-line mode: <pre><code>gpumdkit.sh -calc nep &lt;input.xyz&gt; &lt;output.xyz&gt; &lt;nep.txt&gt;\n</code></pre></p> <p>Direct execution: <pre><code>python calc_properties_with_nep.py &lt;input.xyz&gt; &lt;output.xyz&gt; &lt;nep.txt&gt;\n</code></pre></p>"},{"location":"calculators.html#example","title":"Example","text":"<pre><code># Predict properties for a test set\ngpumdkit.sh -calc nep structures.xyz predictions.xyz nep.txt\n</code></pre>"},{"location":"calculators.html#requirements","title":"Requirements","text":"<ul> <li>Python package: <code>calorine</code> </li> </ul> <pre><code>pip install calorine\n</code></pre>"},{"location":"calculators.html#calc_descriptorspy","title":"calc_descriptors.py","text":"<p>Calculates descriptors for the specific species, which can be used for dimensionality reduction and structure analysis.</p>"},{"location":"calculators.html#usage_2","title":"Usage","text":"<p>Command-line mode: <pre><code>gpumdkit.sh -calc des &lt;input.xyz&gt; &lt;output.npy&gt; &lt;nep.txt&gt; &lt;element&gt;\n</code></pre></p> <p>Direct execution: <pre><code>python calc_descriptors.py &lt;input.xyz&gt; &lt;output.npy&gt; &lt;nep.txt&gt; &lt;element&gt;\n</code></pre></p>"},{"location":"calculators.html#parameters_1","title":"Parameters","text":"<ul> <li><code>&lt;input.xyz&gt;</code>: Input structure file</li> <li><code>&lt;output.npy&gt;</code>: Output <code>npy</code> file with high-dimensional descriptors</li> <li><code>&lt;nep.txt&gt;</code>: NEP model file</li> <li><code>&lt;element&gt;</code>: Target element for descriptor calculations</li> </ul>"},{"location":"calculators.html#examples_1","title":"Examples","text":"<pre><code># Calculate descriptors using UMAP\ngpumdkit.sh -calc des train.xyz descriptors.npy nep.txt Li\n</code></pre>"},{"location":"calculators.html#output_1","title":"Output","text":"<ul> <li>NumPy array file (.npy) containing descriptor vectors</li> <li>Can be visualized using <code>gpumdkit.sh -plt des</code></li> </ul>"},{"location":"calculators.html#applications","title":"Applications","text":"<ul> <li>Training set analysis: Check if training data covers configuration space</li> <li>Model comparison: Compare descriptor distributions across different models</li> </ul>"},{"location":"calculators.html#reference","title":"Reference","text":"<p>See arXiv:2504.15925 if you are interesting in it.</p>"},{"location":"calculators.html#calc_doaspy","title":"calc_doas.py","text":"<p>Calculates the density of atomistic states (DOAS) by optimizing structures and computing per-atom energies.</p>"},{"location":"calculators.html#usage_3","title":"Usage","text":"<p>Command-line mode: <pre><code>gpumdkit.sh -calc doas &lt;input.xyz&gt; &lt;nep.txt&gt; &lt;doas.out&gt;\n</code></pre></p> <p>Direct execution: <pre><code>python calc_doas.py &lt;input.xyz&gt; &lt;nep.txt&gt; &lt;doas.out&gt;\n</code></pre></p>"},{"location":"calculators.html#parameters_2","title":"Parameters","text":"<ul> <li><code>&lt;input.xyz&gt;</code>: Input structure file</li> <li><code>&lt;nep.txt&gt;</code>: NEP model file for structure optimization and atomistic-energies calculation</li> <li><code>&lt;output.txt&gt;</code>: Output file with grouped atomic energies by element</li> </ul>"},{"location":"calculators.html#example_1","title":"Example","text":"<pre><code># Calculate DOAS\ngpumdkit.sh -calc doas structures.xyz nep.txt doas.out\n\n# Visualize results\ngpumdkit.sh -plt doas doas.txt &lt;species&gt;\ngpumdkit.sh -plt doas doas.txt Li\n</code></pre>"},{"location":"calculators.html#process","title":"Process","text":"<ol> <li>Reads all structures from input file</li> <li>Optimizes each structure using NEP (BFGS, fmax=0.05 eV/\u00c5)</li> <li>Extracts per-atom energies from optimized structures</li> <li>Groups energies by element type</li> <li>Outputs distribution for each element</li> </ol> <p>You can also do the <code>minimize</code> and atomistic energy calculations in <code>gpumd</code>, which is prefered for large-scale structures.</p>"},{"location":"calculators.html#neb_calculationpy","title":"neb_calculation.py","text":"<p>Performs nudged elastic band (NEB) calculations to find minimum energy pathways between initial and final states.</p>"},{"location":"calculators.html#usage_4","title":"Usage","text":"<p>Direct execution only: <pre><code>python neb_calculation.py &lt;initial.xyz&gt; &lt;final.xyz&gt; &lt;n_images&gt; &lt;nep.txt&gt;\n</code></pre></p>"},{"location":"calculators.html#parameters_3","title":"Parameters","text":"<ul> <li><code>&lt;initial.xyz&gt;</code>: Initial structure file</li> <li><code>&lt;final.xyz&gt;</code>: Final structure file</li> <li><code>&lt;n_images&gt;</code>: Number of intermediate images</li> <li><code>&lt;nep.txt&gt;</code>: NEP model for energy/force calculations</li> </ul>"},{"location":"calculators.html#example_2","title":"Example","text":"<pre><code># Calculate Li migration pathway with 9 intermediate images\npython neb_calculation.py init.xyz fin.xyz 9 nep.txt\n</code></pre>"},{"location":"calculators.html#interactive-options","title":"Interactive Options","text":"<pre><code> Input the function number:\n 4\n ------------&gt;&gt;\n 401) Calc ionic conductivity\n 402) Calc properties by nep\n 403) Calc descriptors of specific elements\n 404) Calc density of atomistic states (DOAS)\n 405) Calc nudged elastic band (NEB) by nep\n 000) Return to the main menu\n ------------&gt;&gt;\n Input the function number:\n 405\n &gt;-------------------------------------------------&lt;\n | This function calls the script in calculators   |\n | Script: neb_calculation.py                      |\n | Developer: Zhoulin LIU (1776627910@qq.com)      |\n &gt;-------------------------------------------------&lt;\n Input &lt;initial_struct&gt; &lt;final_struct&gt; &lt;n_image&gt; &lt;nep_model&gt;\n Examp: IS.xyz FS.xyz 5 nep.txt\n ------------&gt;&gt;\n</code></pre>"},{"location":"calculators.html#rdf_calculator_ovitopy","title":"rdf_calculator_ovito.py","text":"<p>Calculates radial distribution function (RDF) using OVITO's analysis tools.</p>"},{"location":"calculators.html#usage_5","title":"Usage","text":"<p>Direct execution: <pre><code>python rdf_calculator_ovito.py &lt;input.xyz&gt; &lt;cutoff&gt; &lt;bins&gt;\n</code></pre></p>"},{"location":"calculators.html#parameters_4","title":"Parameters","text":"<ul> <li><code>&lt;input.xyz&gt;</code>: Input structure file (can be single frame or trajectory)</li> <li><code>&lt;cutoff&gt;</code>: Maximum distance for RDF calculation (Angstroms)</li> <li><code>&lt;bins&gt;</code>: Number of histogram bins for RDF</li> </ul>"},{"location":"calculators.html#example_3","title":"Example","text":"<pre><code># Calculate RDF with 6 \u00c5 cutoff and 400 bins\npython rdf_calculator_ovito.py trajectory.xyz 6.0 400\n</code></pre>"},{"location":"calculators.html#visualization","title":"Visualization","text":"<p>After calculation: <pre><code>gpumdkit.sh -plt rdf    \n</code></pre></p> <p>Note: It is recommended to use the <code>compute_rdf</code> command in <code>gpumd</code>.</p>"},{"location":"calculators.html#contributing","title":"Contributing","text":"<p>See CONTRIBUTING.md for detailed guidelines.</p> <p>Thank you for using GPUMDkit! If you have questions or need assistance with calculator scripts, please open an issue on our GitHub repository or contact Zihan YAN (yanzihan@westlake.edu.cn).</p>"},{"location":"contributing.html","title":"Contributing to GPUMDkit","text":"<p>Thank you for your interest in contributing to <code>GPUMDkit</code>! We appreciate your time and effort in helping improve this toolkit. <code>GPUMDkit</code> is an open-source package, and we welcome contributions from the community, whether you're fixing bugs, adding new features, improving documentation, or suggesting enhancements.</p>"},{"location":"contributing.html#table-of-contents","title":"Table of Contents","text":"<ul> <li>Development Restrictions and Guidelines</li> <li>Reporting Bugs</li> <li>Suggesting Features</li> <li>Contributing Code</li> <li>Fork and Clone the Repository</li> <li>Create a Feature Branch</li> <li>Making Changes<ul> <li>Interactive Mode Contributions</li> <li>Command-Line Mode Contributions</li> <li>Updating Tab Completion</li> </ul> </li> <li>Code Style and Best Practices</li> <li>Testing Your Changes</li> <li>Commit Messages</li> <li>Push and Open a Pull Request</li> </ul>"},{"location":"contributing.html#development-restrictions-and-guidelines","title":"Development Restrictions and Guidelines","text":"<p>To maintain code quality and consistency across the project, please adhere to these guidelines:</p>"},{"location":"contributing.html#language-requirements","title":"Language Requirements","text":"<ul> <li>All code should be written in English: This includes variable names, function names, comments, docstrings, commit messages, and documentation.</li> <li>While we understand that contributors come from diverse backgrounds, using English ensures that the codebase is accessible to the widest possible audience.</li> </ul>"},{"location":"contributing.html#modularity-and-reusability","title":"Modularity and Reusability","text":"<ul> <li>Write modular and reusable code: Functions and scripts should be designed with flexibility in mind.</li> <li>Prefer passing parameters over hardcoding values: Use function arguments, command-line parameters, or configuration files instead of hardcoded values. However, some filenames are required to be fixed by GPUMD and NEP programs (e.g., <code>train.xyz</code>, <code>thermo.out</code>), and these can be hardcoded as needed.</li> <li>Example:    <pre><code># Good: accepts parameters\nfunction convert_file() {\n    local input_file=$1\n    local output_file=$2\n    # processing logic\n}\n\n# Avoid: hardcoded values (unless required by GPUMD/NEP)\nfunction convert_file() {\n    local input_file=\"hardcoded_input.xyz\"\n    # processing logic\n}\n</code></pre></li> </ul>"},{"location":"contributing.html#code-style","title":"Code Style","text":"<ul> <li>Write code that is clear and easy for others to maintain and modify.</li> <li>Use meaningful variable and function names.</li> <li>Add comments where necessary to explain complex logic.</li> </ul>"},{"location":"contributing.html#documentation","title":"Documentation","text":"<ul> <li>Ensure that help messages (e.g., <code>-h</code> flags) are clear and accurate.</li> <li>Documentation files in the <code>docs/</code> directory will be updated by the maintainers, so you generally don't need to modify them.</li> </ul>"},{"location":"contributing.html#reporting-bugs","title":"Reporting Bugs","text":"<p>If you encounter a bug, please help us fix it by reporting it through GitHub Issues:</p> <ol> <li>Search existing issues to see if the bug has already been reported.</li> <li>Open a new issue if it hasn't been reported yet: Create an Issue</li> <li>Describe the problem in detail and provide test files if possible.</li> </ol> <p>You can also reach out to us through: - QQ Group: 825696376 - Email: yanzihan@westlake.edu.cn - Script Developer: Contact the developer listed in the script header</p>"},{"location":"contributing.html#suggesting-features","title":"Suggesting Features","text":"<p>We welcome feature suggestions! To propose a new feature:</p> <ol> <li>Search existing issues to see if someone has already suggested it.</li> <li>Open a new feature request: Create a Feature Request and mention @zhyan0603</li> <li>Describe what you need clearly and explain how it would be useful.</li> </ol>"},{"location":"contributing.html#contributing-code","title":"Contributing Code","text":""},{"location":"contributing.html#fork-and-clone-the-repository","title":"Fork and Clone the Repository","text":"<ol> <li> <p>Fork the repository on GitHub by clicking the \"Fork\" button at the top right of the repository page.</p> </li> <li> <p>Clone your fork to your local machine:</p> </li> </ol> <pre><code>git clone https://github.com/YOUR_USERNAME/GPUMDkit.git\ncd GPUMDkit\n</code></pre> <ol> <li>Set up the upstream remote to keep your fork in sync:    <pre><code>git remote add upstream https://github.com/zhyan0603/GPUMDkit.git\n</code></pre></li> </ol>"},{"location":"contributing.html#create-a-feature-branch","title":"Create a Feature Branch","text":"<p>Create a new branch for your changes:</p> <pre><code># Create and checkout a new branch from main\ngit checkout -b your-branch-name\n</code></pre> <p>Name your branch as you prefer.</p>"},{"location":"contributing.html#making-changes","title":"Making Changes","text":"<p>The structure of <code>GPUMDkit</code> consists of: - <code>gpumdkit.sh</code>: Main entry point (Bash script) handling both interactive menu mode and command-line mode - <code>Scripts/</code>: Python utility scripts organized by functionality   - <code>plt_scripts/</code>: Plotting scripts   - <code>calculators/</code>: Calculation utilities   - <code>format_conversion/</code>: Format conversion tools   - <code>workflow/</code>: Workflow automation   - <code>sample_structures/</code>: Structure sampling utilities   - <code>analyzer/</code>: Analysis tools   - <code>utils/</code>: Utility functions (including <code>completion.sh</code> for tab completion) - <code>src/</code>: Shell scripts containing menu functions for interactive mode   - <code>f1_format_conversions.sh</code>   - <code>f2_sample_structures.sh</code>   - <code>f3_workflows.sh</code>   - <code>f4_calculators.sh</code>   - <code>f5_analyzers.sh</code> - <code>docs/</code>: Documentation files</p>"},{"location":"contributing.html#interactive-mode-contributions","title":"Interactive Mode Contributions","text":"<p>To add a new feature accessible through the interactive menu:</p> <ol> <li>Create your implementation script in the appropriate <code>Scripts/</code> subdirectory:</li> </ol> <pre><code># Example: Add a new format conversion script\ntouch Scripts/format_conversion/new_converter.py\n</code></pre> <ol> <li> <p>Implement your functionality following the modularity guidelines (accept parameters, avoid hardcoding).</p> </li> <li> <p>Add a wrapper function in the corresponding <code>src/</code> file:    <pre><code># Example: Edit src/f1_format_conversions.sh\nvim src/f1_format_conversions.sh\n</code></pre></p> </li> </ol> <p>Add a new function:    <pre><code>function f106_new_converter(){\necho \" &gt;-------------------------------------------------&lt;\"\necho \" | Calling the script in Scripts/format_conversion |\"\necho \" | Script: new_converter.py                        |\"\necho \" | Developer: Your Name (your@email.com)           |\"\necho \" &gt;-------------------------------------------------&lt;\"\necho \" Input the required parameters:\"\necho \" Examp: input.xyz output.lmp\"\necho \" ------------&gt;&gt;\"\nread -p \" \" converter_params\necho \" ---------------------------------------------------\"\npython ${GPUMDkit_path}/Scripts/format_conversion/new_converter.py ${converter_params}\necho \" Code path: ${GPUMDkit_path}/Scripts/format_conversion/new_converter.py\"\necho \" ---------------------------------------------------\"\n}\n</code></pre></p> <ol> <li> <p>Update the menu display in <code>gpumdkit.sh</code>:    <pre><code># Find the menu() function and update it if needed\n# Find the array_choice array and add your new choice number\narray_choice=(\n    \"0\" \"1\" \"101\" \"102\" \"103\" \"104\" \"105\" \"106\"  # Added \"106\"\n    # ... rest of choices\n)\n</code></pre></p> </li> <li> <p>Add the case statement in <code>gpumdkit.sh</code>:    <pre><code># In the main() function, find the appropriate case statement\ncase \"${choice:0:1}\" in\n    # ...\n    \"1\")\n        source ${GPUMDkit_path}/src/f1_format_conversions.sh\n        case $choice in\n            \"1\") f1_format_conversion ;;\n            \"101\") f101_out2xyz ;;\n            # ... existing cases ...\n            \"106\") f106_new_converter ;;  # Add your case\n        esac ;;\n    # ...\nesac\n</code></pre></p> </li> </ol>"},{"location":"contributing.html#command-line-mode-contributions","title":"Command-Line Mode Contributions","text":"<p>To add a new command-line flag or subcommand:</p> <ol> <li> <p>Create your implementation script in the appropriate <code>Scripts/</code> subdirectory:    <pre><code># Example: Add a new analyzer script\ntouch Scripts/analyzer/analyze_bonds.py\n</code></pre></p> </li> <li> <p>Implement your functionality with clear parameter requirements:    <pre><code># Example: Scripts/analyzer/analyze_bonds.py\nimport sys\n\ndef main():\n    if len(sys.argv) != 3:\n        print(\"Usage: gpumdkit.sh -analyze_bonds &lt;input.xyz&gt; &lt;cutoff_distance&gt;\")\n        print(\"Example: gpumdkit.sh -analyze_bonds structure.xyz 3.0\")\n        sys.exit(1)\n\n    input_file = sys.argv[1]\n    cutoff = float(sys.argv[2])\n\n    # Your implementation here\n\nif __name__ == \"__main__\":\n    main()\n</code></pre></p> </li> <li> <p>Add the command-line flag handler in <code>gpumdkit.sh</code>:    <pre><code># Find the command-line parsing section (after line ~167)\n# Add your new flag in the appropriate location\n\ncase $1 in\n    # ... existing cases ...\n    -analyze_bonds)\n        if [ ! -z \"$2\" ] &amp;&amp; [ ! -z \"$3\" ]; then\n            python ${analyzer_path}/analyze_bonds.py \"$2\" \"$3\"\n        else\n            echo \" Usage: gpumdkit.sh -analyze_bonds &lt;input.xyz&gt; &lt;cutoff_distance&gt;\"\n            echo \" Example: gpumdkit.sh -analyze_bonds structure.xyz 3.0\"\n            echo \" Code path: ${analyzer_path}/analyze_bonds.py\"\n            exit 1\n        fi ;;\n    # ... rest of cases ...\nesac\n</code></pre></p> </li> <li> <p>Update the help information in <code>gpumdkit.sh</code>:    <pre><code># Find the help_info_table() function and add your command\nfunction help_info_table(){\n    echo \"+====================================== Analysis ===============================================+\"\n    echo \"| -analyze_bonds Analyze bond lengths in struct | -analyze_comp Analyze composition of extxyz      |\"\n    # ... rest of help table ...\n}\n</code></pre></p> </li> </ol>"},{"location":"contributing.html#updating-tab-completion","title":"Updating Tab Completion","text":"<p>When adding new command-line flags, update the tab completion script:</p> <pre><code># Edit Scripts/utils/completion.sh\nvim Scripts/utils/completion.sh\n</code></pre> <p>Add your new flag to the <code>opts</code> variable: <pre><code># Find the line with local opts=...\nlocal opts=\"-h -update -U -help -clean -time -plt -calc -analyze_bonds -range -out2xyz ...\"\n#                                                      ^^^^^^^^^^^^^^ Add your flag here\n</code></pre></p> <p>If your flag accepts secondary options (like <code>-plt</code> or <code>-calc</code>), add a case for it: <pre><code>case \"$prev\" in\n    # ... existing cases ...\n    -analyze_bonds)\n        COMPREPLY=($(compgen -f -- \"$cur\"))  # Complete with filenames\n        ;;\n    # ... rest of cases ...\nesac\n</code></pre></p>"},{"location":"contributing.html#code-style-and-best-practices","title":"Code Style and Best Practices","text":"<ul> <li>Shell Scripts:</li> <li>Use <code>${variable}</code> for variable expansion</li> <li> <p>Write code that is clear and easy to maintain</p> </li> <li> <p>Python Scripts:</p> </li> <li>Write clear, maintainable code</li> <li>Use meaningful variable names</li> </ul>"},{"location":"contributing.html#testing-your-changes","title":"Testing Your Changes","text":"<p>Before submitting your contribution:</p> <ol> <li> <p>Test interactive mode (if applicable):    <pre><code>gpumdkit.sh\n# Navigate to your new feature and test it thoroughly\n</code></pre></p> </li> <li> <p>Test command-line mode (if applicable):    <pre><code>gpumdkit.sh -your_new_flag [arguments]\ngpumdkit.sh -your_new_flag -h  # Test help message\n</code></pre></p> </li> <li> <p>Test tab completion (if you modified <code>completion.sh</code>):    <pre><code>source Scripts/utils/completion.sh\ngpumdkit.sh -&lt;TAB&gt;  # Should show your new flag\n</code></pre></p> </li> <li> <p>Test with various inputs:</p> </li> <li>Test with typical inputs</li> <li>Test with edge cases (empty files, large files, etc.)</li> <li> <p>Test error handling (missing files, invalid parameters)</p> </li> <li> <p>Verify no regressions: Ensure existing functionality still works correctly.</p> </li> </ol>"},{"location":"contributing.html#commit-messages","title":"Commit Messages","text":"<p>Write clear, descriptive commit messages that explain what you changed. There are no strict format requirements - just make sure your message is understandable.</p>"},{"location":"contributing.html#push-and-open-a-pull-request","title":"Push and Open a Pull Request","text":"<ol> <li> <p>Commit your changes:    <pre><code>git add .\ngit commit -m \"your descriptive message\"\n</code></pre></p> </li> <li> <p>Keep your branch updated with the upstream <code>main</code> branch:    <pre><code>git fetch upstream\ngit rebase upstream/main\n</code></pre></p> </li> <li> <p>Push your branch to your fork:    <pre><code>git push origin your-branch-name\n</code></pre></p> </li> <li> <p>Open a Pull Request:</p> </li> <li>Go to the GPUMDkit repository</li> <li>Click \"Pull Requests\" \u2192 \"New Pull Request\"</li> <li>Set the base branch to <code>dev</code> for code review</li> <li>Set the compare branch to your feature branch</li> <li> <p>Fill in the PR description with:</p> <ul> <li>Title: Brief description of changes</li> <li>Description: Detailed explanation of what changed and why</li> <li>Testing: Describe how you tested the changes</li> </ul> </li> <li> <p>Respond to review feedback:</p> </li> <li>Be open to suggestions and constructive criticism</li> <li>Make requested changes promptly</li> <li> <p>Push additional commits to your branch (they'll automatically appear in the PR)</p> </li> <li> <p>After approval: A maintainer will merge your PR.</p> </li> </ol>"},{"location":"contributing.html#questions-or-need-help","title":"Questions or Need Help?","text":"<p>If you have questions about contributing or need help with your contribution:</p> <ul> <li>Open a discussion: Use GitHub Discussions for general questions</li> <li>Ask in an issue: Comment on related issues for specific questions</li> <li>Contact maintainers: Reach out to the core developers listed in the README</li> </ul> <p>Thank you again for contributing to <code>GPUMDkit</code>! Your efforts help make this toolkit better for the entire GPUMD and NEP community. \ud83d\ude80</p>"},{"location":"custom_commands.html","title":"Custom Commands","text":"\ud83d\udd27 Custom Commands <p>GPUMDkit allows users to extend the command-line interface with custom commands. Define shortcuts for frequently used scripts in your ~/.gpumdkit.in file.</p>"},{"location":"custom_commands.html#setup","title":"Setup","text":"<p>Create or edit <code>~/.gpumdkit.in</code>: <pre><code>vi ~/.gpumdkit.in\n</code></pre></p> <p>Define custom functions with the <code>custom_</code> prefix.</p>"},{"location":"custom_commands.html#examples","title":"Examples","text":""},{"location":"custom_commands.html#simple-greeting","title":"Simple Greeting","text":"<p>Write the following codes in your <code>~/.gpumdkit.in</code> </p> <pre><code>custom_hello() {\n    echo \"Hello, GPUMDkit user! This is a custom command.\"\n    echo \"Current GPUMDkit path: ${GPUMDkit_path}\"\n}\n</code></pre> <p>and run <code>gpumdkit.sh -hello</code>, you will see:</p> <pre><code>Hello, GPUMDkit user! This is a custom command.\nCurrent GPUMDkit path: /home/yanzihan/software/GPUMDkit\n</code></pre>"},{"location":"custom_commands.html#command-with-required-arguments","title":"Command with Required Arguments","text":"<p>For the following function:</p> <pre><code>custom_greet() {\n    name=$1\n    echo \"Hello, ${name}!\"\n}\n</code></pre> <p>and you can add a argument, for example: <code>gpumdkit.sh -greet Zihan</code>, then you will see:</p> <pre><code>Hello, Zihan!\n</code></pre> <p>Passing arguments: Use <code>\"$@\"</code> to forward all arguments safely. Use <code>${@:1}</code> when you need to refer to arguments starting from the first one. </p>"},{"location":"custom_commands.html#calling-an-external-script","title":"Calling an External Script","text":"<p>If you want to call an external script like <code>gpumdkit.sh</code>.</p> <pre><code>custom_nepanalyse() {\n    python ~/my_gpumd_tools/analyse_nep.py\n}\n</code></pre> <p>and run <code>gpumdkit.sh -nepanalyse</code></p>"},{"location":"custom_commands.html#advanced-examples","title":"Advanced Examples","text":""},{"location":"custom_commands.html#batch-processing","title":"Batch Processing","text":"<p>Process multiple files: <pre><code>custom_batch_plot() {\n    for dir in \"$@\"; do\n        cd \"$dir\"\n        gpumdkit.sh -plt thermo save\n        gpumdkit.sh -plt msd save\n        cd ..\n    done\n}\n</code></pre></p> <p>Usage: <code>gpumdkit.sh -batch_plot dir1 dir2 dir3</code></p>"},{"location":"custom_commands.html#analysis-pipeline","title":"Analysis Pipeline","text":"<p>Combine multiple operations: <pre><code>custom_analyze_training() {\n    xyz_file=$1\n    echo \"Analyzing $xyz_file...\"\n\n    gpumdkit.sh -range \"$xyz_file\" force\n    gpumdkit.sh -min_dist_pbc \"$xyz_file\"\n    gpumdkit.sh -analyze_comp \"$xyz_file\"\n\n    echo \"Analysis complete!\"\n}\n</code></pre></p> <p>Usage: <code>gpumdkit.sh -analyze_training train.xyz</code></p>"},{"location":"custom_commands.html#custom-workflow","title":"Custom Workflow","text":"<p>Automate common workflow: <pre><code>custom_prep_training() {\n    echo \"Preparing training data...\"\n\n    # Convert VASP outputs\n    gpumdkit.sh -out2xyz ./\n\n    # Filter outliers\n    gpumdkit.sh -filter_value train.xyz force 30\n\n    # Check quality\n    gpumdkit.sh -range filtered_force.xyz energy\n\n    echo \"Training data ready!\"\n}\n</code></pre></p> <p>Usage: <code>gpumdkit.sh -prep_training</code></p>"},{"location":"custom_commands.html#tips","title":"Tips","text":"<ul> <li>Use descriptive names: <code>custom_analyze_nep_training</code> is clearer than <code>custom_ant</code></li> <li>Add help messages: Echo usage info when no arguments provided</li> <li>Error handling: Check if required files exist before processing</li> <li>Forward arguments safely: Use <code>\"$@\"</code> to preserve spaces and special characters</li> </ul> <p>Thank you for using <code>GPUMDkit</code>! If you have any questions or need further assistance, feel free to open an issue on our GitHub repository or contact Zihan YAN (yanzihan@westlake.edu.cn).</p>"},{"location":"format_conversion.html","title":"Format Conversion","text":"\ud83d\udd04 Format Conversion <p>This directory (Scripts/format_conversion/) contains utilities for converting between different file formats commonly used in computational materials science.</p> <p>Script Location: <code>Scripts/format_conversion/</code></p> <p>This section covers the format conversion tools in GPUMDkit (Interactive Mode - Option 1).</p>"},{"location":"format_conversion.html#interactive-mode","title":"Interactive Mode","text":"<pre><code>gpumdkit.sh\n# Select: 1) Format Conversion\n</code></pre> <p>You'll see the following menu:</p> <pre><code> ------------&gt;&gt;\n 101) Convert VASP to extxyz\n 102) Convert mtp to extxyz\n 103) Convert CP2K to extxyz\n 104) Convert ABACUS to extxyz\n 105) Convert extxyz to POSCAR\n 000) Return to the main menu\n ------------&gt;&gt;\n Input the function number:\n</code></pre> <p>for <code>101</code>:</p> <pre><code> &gt;-------------------------------------------------&lt;\n | Calling the script in Scripts/format_conversion |\n | Script: out2xyz.sh                              |\n | Developer: Yanzhou WANG (yanzhowang@gmail.com)  |\n &gt;-------------------------------------------------&lt;\n Choose the type of conversion:\n 1) OUTCAR to extxyz\n 2) vasprun.xml to extxyz\n ------------&gt;&gt;\n</code></pre> <p>for <code>102</code>:</p> <pre><code> &gt;-------------------------------------------------&lt;\n | Calling the script in Scripts/format_conversion |\n | Script: mtp2xyz.py                              |\n | Developer: Ke XU (kickhsu@gmail.com)            |\n &gt;-------------------------------------------------&lt;\n Input &lt;filename.cfg&gt; &lt;Symbol1 Symbol2 Symbol3 ...&gt;\n Examp: train.cfg Pd Ag\n ------------&gt;&gt;\n</code></pre> <p>for <code>103</code>:</p> <pre><code> &gt;-------------------------------------------------&lt;\n | Calling the script in Scripts/format_conversion |\n | Script: cp2k2xyz.py                             |\n | Developer: Ke XU (kickhsu@gmail.com)            |\n &gt;-------------------------------------------------&lt;\n Input [pos.xyz] [frc.xyz] [cell.cell] [-shifted yes/no]\n ------------&gt;&gt;\n</code></pre> <p>for <code>104</code>:</p> <pre><code> &gt;-------------------------------------------------&lt;\n | Calling the script in Scripts/format_conversion |\n | Script: abacus2xyz-scf.sh/abacus2xyz-md.sh      |\n | Developer: Benrui TANG (tang070205@proton.me)   |\n &gt;-------------------------------------------------&lt;\n Choose the type of ABACUS calculation:\n 1) SCF calculation\n 2) MD calculation\n ------------&gt;&gt;\n</code></pre> <p>for <code>105</code>:</p> <pre><code> &gt;-------------------------------------------------&lt;\n | Calling the script in Scripts/format_conversion |\n | Script: exyz2pos.py                             |\n | Developer: Zihan YAN (yanzihan@westlake.edu.cn) |\n &gt;-------------------------------------------------&lt;\n Input the name of extxyz\n Examp: ./train.xyz\n ------------&gt;&gt;\n</code></pre> <p>Follow the prompts to complete the function.</p>"},{"location":"format_conversion.html#command-line-mode","title":"Command-line Mode","text":"Source Format Target Format Command OUTCAR extxyz <code>gpumdkit.sh -out2xyz &lt;dir&gt;</code> vasprun.xml extxyz <code>gpumdkit.sh -xml2xyz &lt;dir&gt;</code> POSCAR extxyz <code>gpumdkit.sh -pos2exyz &lt;poscar&gt; &lt;xyz&gt;</code> extxyz POSCAR <code>gpumdkit.sh -exyz2pos &lt;xyz&gt;</code> POSCAR LAMMPS <code>gpumdkit.sh -pos2lmp &lt;poscar&gt; &lt;lmp&gt; &lt;elem...&gt;</code> LAMMPS dump extxyz <code>gpumdkit.sh -lmp2exyz &lt;dump&gt; &lt;elem...&gt;</code> CIF extxyz <code>gpumdkit.sh -cif2exyz &lt;cif&gt;</code> CIF POSCAR <code>gpumdkit.sh -cif2pos &lt;cif&gt;</code> Add groups - <code>gpumdkit.sh -addgroup &lt;poscar&gt; &lt;elem...&gt;</code> Add weight - <code>gpumdkit.sh -addweight &lt;in&gt; &lt;out&gt; &lt;weight&gt;</code> Replicate1 - <code>gpumdkit.sh -replicate input.vasp output.vasp 2 2 2</code> Replicate2 - <code>gpumdkit.sh -replicate input.vasp output.vasp &lt;target_num&gt;</code> Get frame - <code>gpumdkit.sh -ge_frame &lt;extxyz&gt; &lt;index&gt;</code>"},{"location":"format_conversion.html#scripts","title":"Scripts","text":""},{"location":"format_conversion.html#add_groupspy","title":"add_groups.py","text":"<p>This script adds group labels to structures based on specified elements.</p>"},{"location":"format_conversion.html#usage","title":"Usage","text":"<pre><code>python add_groups.py &lt;filename&gt; &lt;Symbols1&gt; &lt;Symbols2&gt; ...\n</code></pre> <ul> <li><code>&lt;filename&gt;</code>: The path to the input file (e.g., POSCAR).</li> <li><code>&lt;Symbols&gt;</code>: Space-separated list of element symbols to group (e.g., Li Y Cl).</li> </ul>"},{"location":"format_conversion.html#example","title":"Example","text":"<pre><code>python add_groups.py POSCAR Li Y Cl\n</code></pre>"},{"location":"format_conversion.html#command-line-mode-example","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -addgroup POSCAR Li Y Cl\n</code></pre> <p>This command will read the <code>POSCAR</code> file and add group labels for the elements <code>Li</code>, <code>Y</code>, and <code>Cl</code>. The output will be saved to a file named <code>model.xyz</code>.</p>"},{"location":"format_conversion.html#add_weightpy","title":"add_weight.py","text":"<p>This script adds weight labels to structures.</p>"},{"location":"format_conversion.html#usage_1","title":"Usage","text":"<pre><code>python add_weight.py &lt;input_file&gt; &lt;output_file&gt; &lt;new_weight&gt;\n</code></pre> <ul> <li><code>&lt;inputfile&gt;</code>: The path to the input file (e.g., train.xyz).</li> <li><code>&lt;outputfile&gt;</code>: The path to the input file (e.g., train_weighted.xyz).</li> <li><code>&lt;new_weight&gt;</code>: The <code>weight</code> you need to change.</li> </ul>"},{"location":"format_conversion.html#example_1","title":"Example","text":"<pre><code>python add_weight.py train.xyz train_weighted.xyz 5\n</code></pre>"},{"location":"format_conversion.html#command-line-mode-example_1","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -addweight train.xyz train_weighted.xyz 5\n</code></pre> <p>This command will read the <code>train.xyz</code> file and add <code>Weight=5</code> labels for all structures. The output will be saved to a file named <code>train_weighted.xyz</code>.</p>"},{"location":"format_conversion.html#exyz2pospy","title":"exyz2pos.py","text":"<p>This script converts all frames in an <code>extxyz</code> file to <code>POSCAR</code> format.</p>"},{"location":"format_conversion.html#usage_2","title":"Usage","text":"<pre><code>python exyz2pos.py &lt;extxyz_file&gt;\n</code></pre>"},{"location":"format_conversion.html#example_2","title":"Example","text":"<pre><code>python exyz2pos.py structs.xyz\n</code></pre>"},{"location":"format_conversion.html#command-line-mode-example_2","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -exyz2pos structs.xyz\n</code></pre> <p>This command will convert all frames in <code>structs.xyz</code> to <code>POSCAR_*.vasp</code> files.</p>"},{"location":"format_conversion.html#pos2exyzpy","title":"pos2exyz.py","text":"<p>This script converts a <code>POSCAR</code> file to <code>extxyz</code> format.</p>"},{"location":"format_conversion.html#usage_3","title":"Usage","text":"<pre><code>python pos2exyz.py &lt;POSCAR_file&gt; &lt;extxyz_file&gt;\n</code></pre> <ul> <li><code>&lt;POSCAR_file&gt;</code>: The path to the input <code>POSCAR</code> file.</li> <li><code>&lt;extxyz_file&gt;</code>: The desired name for the output <code>extxyz</code> file.</li> </ul>"},{"location":"format_conversion.html#example_3","title":"Example","text":"<pre><code>python pos2exyz.py POSCAR model.xyz\n</code></pre>"},{"location":"format_conversion.html#command-line-mode-example_3","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -pos2exyz POSCAR model.xyz\n</code></pre> <p>This command will read the <code>POSCAR</code> file and convert it to <code>model.xyz</code> in <code>extxyz</code> format.</p>"},{"location":"format_conversion.html#pos2lmppy","title":"pos2lmp.py","text":"<p>This script converts a <code>POSCAR</code> file to <code>lammps-data</code> format.</p>"},{"location":"format_conversion.html#usage_4","title":"Usage","text":"<pre><code>python pos2lmp.py &lt;poscar_file&gt; &lt;lammps_data_file&gt;\n</code></pre> <ul> <li><code>&lt;poscar_file&gt;</code>: The path to the input <code>POSCAR</code> file.</li> <li><code>&lt;lammps_data_file&gt;</code>: The desired name for the output <code>lammps-data</code> file.</li> </ul>"},{"location":"format_conversion.html#example_4","title":"Example","text":"<pre><code>python pos2lmp.py POSCAR lammps.data\n</code></pre>"},{"location":"format_conversion.html#command-line-mode-example_4","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -pos2lmp POSCAR lammps.data\n</code></pre> <p>This command will read the <code>POSCAR</code> file and convert it to <code>lammps.data</code> in <code>lammps-data</code> format.</p>"},{"location":"format_conversion.html#split_single_xyzpy","title":"split_single_xyz.py","text":"<p>This script splits an <code>extxyz</code> file into individual frames, each written to a separate file.</p>"},{"location":"format_conversion.html#usage_5","title":"Usage","text":"<pre><code>python split_single_xyz.py &lt;extxyz_file&gt;\n</code></pre> <p>This command will split all frames in <code>extxyz_file</code> into separate files named <code>model_*.xyz</code>.</p>"},{"location":"format_conversion.html#lmp2exyzpy","title":"lmp2exyz.py","text":"<p>This script will convert the <code>lammps-dump</code> to <code>extxyz</code> format.</p>"},{"location":"format_conversion.html#usage_6","title":"Usage","text":"<pre><code>python lmp2exyz.py &lt;dump_file&gt; &lt;element1&gt; &lt;element2&gt; ...\n</code></pre> <ul> <li><code>&lt;dump_file&gt;</code>: The path to the input <code>lammps-dump</code> file.</li> <li><code>&lt;element&gt;</code>: The order of the specified elements.</li> </ul>"},{"location":"format_conversion.html#example_5","title":"Example","text":"<pre><code>python lmp2exyz.py dump.data Li Y Cl\n</code></pre>"},{"location":"format_conversion.html#command-line-mode-example_5","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -lmp2exyz dump.data Li Y Cl\n</code></pre> <p>It will convert the <code>dump.data</code> to <code>dump.xyz</code> file</p>"},{"location":"format_conversion.html#get_framepy","title":"get_frame.py","text":"<p>This script will read the <code>extxyz</code> file and return the specified frame by index..</p>"},{"location":"format_conversion.html#usage_7","title":"Usage","text":"<pre><code>python get_frame.py &lt;extxyz_file&gt; &lt;frame_index&gt;\n</code></pre> <ul> <li><code>&lt;extxyz_file&gt;</code>: The path to the input <code>extxyz</code> file.</li> <li><code>&lt;frame_index&gt;</code>: The index of the specified frame.</li> </ul>"},{"location":"format_conversion.html#example_6","title":"Example","text":"<pre><code>python get_frame.py dump.xyz 1000\n</code></pre>"},{"location":"format_conversion.html#command-line-mode-example_6","title":"Command-Line Mode Example","text":"<pre><code>gpumdkit.sh -get_frame dump.xyz 1000\n</code></pre> <p>You will get the <code>frame_1000.xyz</code> file after perform the script.</p>"},{"location":"format_conversion.html#contributing","title":"Contributing","text":"<p>To add new format converters:</p> <ol> <li>Follow naming: <code>&lt;source&gt;2&lt;target&gt;.py</code></li> <li>Handle errors: Validate input format before processing</li> <li>Document: Add usage to this README</li> <li>Update gpumdkit.sh: Add command-line flag if appropriate</li> </ol> <p>See CONTRIBUTING.md for detailed guidelines.</p> <p>Thank you for using GPUMDkit! If you have questions about format conversion, please open an issue on our GitHub repository or contact Zihan YAN (yanzihan@westlake.edu.cn).</p>"},{"location":"plot_scripts.html","title":"Plot Scripts","text":"\ud83d\udcca Plot Scripts <p>This directory (Scripts/plt_scripts/) contains Python scripts for comprehensive visualization of data generated by GPUMD and NEP. These plotting tools help analyze molecular dynamics simulations, NEP training results, and various material properties.</p> <p>Script Location: <code>Scripts/plt_scripts/</code></p> <p>GPUMDkit provides comprehensive visualization tools for GPUMD and NEP data.</p>"},{"location":"plot_scripts.html#command-line-mode","title":"Command-Line Mode","text":"<pre><code>gpumdkit.sh -plt &lt;plot_type&gt; [options]\n</code></pre> <p>For a complete list: <pre><code>gpumdkit.sh -plt -h\n\n+=====================================================================================================+\n|                              GPUMDkit 1.4.2 (dev) (2025-12-17) Plotting Usage                       |\n+=============================================== Plot Types ==========================================+\n| thermo          Plot thermo info                   | train          Plot NEP train results          |\n| prediction      Plot NEP prediction results        | train_test     Plot NEP train and test results |\n| msd             Plot mean square displacement      | msd_conv       Plot the convergence of MSD     |\n| msd_all         Plot MSD of all species            | sdc            Plot self diffusion coefficient |\n| rdf             Plot radial distribution function  | vac            Plot velocity autocorrelation   |\n| restart         Plot parameters in nep.restart     | dimer          Plot dimer plot                 |\n| force_errors    Plot force errors                  | des            Plot descriptors                |\n| charge          Plot charge distribution           | lr             Plot learning rate              |\n| doas            Plot density of atomistic states   | arrhenius_d    Plot Arrhenius diffusivity      |\n| arrhenius_sigma Plot Arrhenius sigma               | net_force      Plot net force distribution     |\n| emd             Plot EMD results                   | nemd           Plot NEMD results               |\n| hnemd           Plot HNEMD results                 |                                                |\n+=====================================================================================================+\n| For detailed usage and examples, use: gpumdkit.sh -plt &lt;plot_type&gt; -h                               |\n+=====================================================================================================+\n See the codes in plt_scripts for more details\n Code path: /d/Westlake/GPUMD/Gpumdkit/Scripts/plt_scripts\n</code></pre></p>"},{"location":"plot_scripts.html#script-categories","title":"Script Categories","text":""},{"location":"plot_scripts.html#nep-training-prediction","title":"\ud83d\udd2c NEP Training &amp; Prediction","text":"<p>Scripts for monitoring and analyzing NEP model training and predictions.</p>"},{"location":"plot_scripts.html#plt_trainpy","title":"plt_train.py","text":"<p>Visualizes NEP training progress including loss curves, RMSE evolution, and parity plots comparing DFT vs NEP predictions for energy, forces, and stresses.</p> <p>Input File: <code>loss.out</code>, <code>energy_train.out</code>, <code>force_train.out</code>, <code>virial_train.out</code></p> <p>Usage: <pre><code>gpumdkit.sh -plt train\n</code></pre></p>"},{"location":"plot_scripts.html#plt_predictionpy","title":"plt_prediction.py","text":"<p>Visualizes NEP prediction results.</p> <p>Input Files: <code>energy_test.out</code>, <code>force_test.out</code>, <code>virial_test.out</code></p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt prediction\ngpumdkit.sh -plt test             # Alternative command\n</code></pre> <p></p>"},{"location":"plot_scripts.html#plt_train_testpy","title":"plt_train_test.py","text":"<p>Creates combined parity plots for both training and testing datasets.</p> <p>Input Files: <code>*_train.out</code>, <code>*_test.out</code></p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt train_test  \n</code></pre> <p></p>"},{"location":"plot_scripts.html#plt_parity_densitypy","title":"plt_parity_density.py","text":"<p>Generates density-based parity plots for energies, forces, and stresses, useful for large datasets.</p> <p>Input Files: <code>energy_train.out</code>, <code>force_train.out</code>, <code>virial_train.out</code></p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt parity_density\n</code></pre> <p></p>"},{"location":"plot_scripts.html#plt_force_errorspy","title":"plt_force_errors.py","text":"<p>Plots force error evaluation metrics as proposed in Liu et al..</p> <p>Input File: <code>force_train.out</code></p> <p>Usage: <pre><code>gpumdkit.sh -plt force_errors\n</code></pre></p> <p>Metrics Displayed: - Force magnitude errors (delta_F) - Force angle errors  (delta_theta) - Distribution of errors</p> <p></p>"},{"location":"plot_scripts.html#plt_learning_ratepy","title":"plt_learning_rate.py","text":"<p>Visualizes learning rate during <code>gnep</code> training.</p> <p>Input File: <code>loss.out</code> </p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt lr \n</code></pre> <p>Use Case: Monitor learning rate decay. </p> <p>Note: this is only for the <code>gnep</code> training process.</p>"},{"location":"plot_scripts.html#plt_nep_restartpy","title":"plt_nep_restart.py","text":"<p>Visualizes parameters stored in <code>nep.restart</code> file.</p> <p>Input File: <code>nep.restart</code></p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt restart    \n</code></pre>"},{"location":"plot_scripts.html#thermodynamic-properties","title":"\ud83c\udf21\ufe0f Thermodynamic Properties","text":"<p>Scripts for visualizing thermo info from GPUMD simulations.</p>"},{"location":"plot_scripts.html#plt_thermopy","title":"plt_thermo.py","text":"<p>Primary script for comprehensive thermodynamic property visualization.</p> <p>Input File: <code>thermo.out</code></p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt thermo  \n</code></pre> <p></p>"},{"location":"plot_scripts.html#plt_thermo2py-plt_thermo3py","title":"plt_thermo2.py &amp; plt_thermo3.py","text":"<p>Alternative thermodynamic visualization (different styles).</p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt thermo2 \ngpumdkit.sh -plt thermo3\n</code></pre>"},{"location":"plot_scripts.html#transport-properties","title":"\ud83d\udd04 Transport Properties","text":"<p>Scripts for analyzing diffusion, ionic conductivity, and thermal transport, etc.</p>"},{"location":"plot_scripts.html#plt_msdpy","title":"plt_msd.py","text":"<p>Plots mean square displacement (MSD) for all directions.</p> <p>Input File: <code>msd.out</code></p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt msd\n</code></pre>"},{"location":"plot_scripts.html#plt_msd_allpy","title":"plt_msd_all.py","text":"<p>Plots MSD for all atomic species separately when using <code>all_groups</code> in GPUMD.</p> <p>Input File: <code>msd.out</code> (computed with <code>all_groups</code> option)</p> <p>Usage: <pre><code>gpumdkit.sh -plt msd_all &lt;species1&gt; &lt;species2&gt; ...\ngpumdkit.sh -plt msd_all Li P S\n</code></pre></p> <p>Requirements: Must use <code>all_groups</code> in the <code>compute_msd</code> command in <code>run.in</code>.</p>"},{"location":"plot_scripts.html#plt_msd_convergence_checkpy","title":"plt_msd_convergence_check.py","text":"<p>Checks convergence of MSD calculations across different time windows.</p> <p>Input File: <code>msd.out</code> (computed with <code>save_every</code> option)</p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt msd_conv\n</code></pre> <p>Requirements: Use <code>save_every</code> in the <code>compute_msd</code> command.</p> <p>Purpose: Verify MSD has converged sufficiently for accurate diffusion coefficient calculation.</p>"},{"location":"plot_scripts.html#plt_sdcpy","title":"plt_sdc.py","text":"<p>Plots self-diffusion coefficient (SDC) vs time.</p> <p>Input File: <code>msd.out</code></p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt sdc\n</code></pre>"},{"location":"plot_scripts.html#plt_arrhenius_dpy","title":"plt_arrhenius_d.py","text":"<p>Creates Arrhenius plot for diffusivity (log10 D vs 1000/T).</p> <p>Input Files: <code>*K/msd.out</code> files</p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt arrhenius_d\ngpumdkit.sh -plt D  # Alternative command\n</code></pre> <p>Output:</p> <pre><code>T: 300K, D_total: 1.001e-07 cm2/s\nT: 350K, D_total: 4.184e-07 cm2/s\nT: 400K, D_total: 1.027e-06 cm2/s\nT: 450K, D_total: 2.069e-06 cm2/s\nT: 500K, D_total: 3.563e-06 cm2/s\nEa: 0.230 eV\n</code></pre>"},{"location":"plot_scripts.html#plt_arrhenius_sigmapy","title":"plt_arrhenius_sigma.py","text":"<p>Creates Arrhenius plot for ionic conductivity (ln(\u03c3\u00b7T) vs 1000/T).</p> <p>Input Files: <code>*K/{model.xyz, run.in, thermo.out, msd.out}</code></p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt arrhenius_sigma\ngpumdkit.sh -plt sigma         # Alternative command\n</code></pre> <p>Output:</p> <pre><code>[Note] No run.in file found, assuming no replication\n\nConductivity Data:\nT (K)  Sigma (S/cm)    Sigma\u00b7T (K\u00b7S/cm)\n------------------------------------\n300    1.141e-02       3.422e+00\n350    4.377e-02       1.532e+01\n400    9.470e-02       3.788e+01\n450    1.688e-01       7.595e+01\n500    2.625e-01       1.312e+02\n------------------------------------\n\nmsd, Ea: 0.234 eV\nat 300K, LGPS: Sigma = 1.250e-02 S/cm\n</code></pre>"},{"location":"plot_scripts.html#plt_emdpy","title":"plt_emd.py","text":"<p>Analyzes and plots thermal conductivity from equilibrium molecular dynamics (EMD).</p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt emd &lt;direction&gt;\ngpumdkit.sh -plt emd x # for x direction\n</code></pre>"},{"location":"plot_scripts.html#plt_nemdpy","title":"plt_nemd.py","text":"<p>Visualizes non-equilibrium molecular dynamics (NEMD) thermal transport properties.</p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt nemd [real_length] [scale_eff_size] [cutoff_freq] [save]\n</code></pre> <p>Params:</p> <pre><code>real_length   : Real length of heat tranfer zone in nm (set to 'Auto', with auto-calculation)\nscale_eff_size: Optional, Scale factor for effective cross-sectional area (default: 1)\n               \u2022 For 3D bulk systems: use 1\n               \u2022 For low-dimensional systems with vacuum layer: S_box / S_eff\n                 - S_box: box area perpendicular to heat transfer direction\n                 - S_eff: real or effective area of the system\ncutoff_freq   : Optional, Cutoff frequency for SHC calculation in THz (default: 60)\nsave          : Optional, save the plot as 'nemd.png'\n!!! Note !!!  : If no SHC data, set [scale_eff_size] and [cutoff_freq] to any number as placeholders when using 'save'.\n</code></pre>"},{"location":"plot_scripts.html#plt_hnemdpy","title":"plt_hnemd.py","text":"<p>Plots homogeneous non-equilibrium molecular dynamics (HNEMD) results.</p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt hnemd [scale_eff_size] [cutoff_freq] [save]\n</code></pre> <p>Params:</p> <pre><code>scale_eff_size: Optional, Scale factor for effective cross-sectional area (default: 1)\n               \u2022 For 3D bulk systems: use 1\n               \u2022 For low-dimensional systems with vacuum layer: S_box / S_eff\n                 - S_box: box area perpendicular to heat transfer direction\n                 - S_eff: real or effective area of the system\ncutoff_freq   : Optional, Cutoff frequency for SHC calculation in THz (default: 60)\nsave          : Optional, save the plot as 'hnemd.png'\n!!! Note !!!  : If no SHC data, set [scale_eff_size] and [cutoff_freq] to any number as placeholders when using 'save'.\n</code></pre>"},{"location":"plot_scripts.html#structural-analysis","title":"\ud83d\udcd0 Structural Analysis","text":"<p>Scripts for analyzing atomic structure and distributions.</p>"},{"location":"plot_scripts.html#plt_rdfpy","title":"plt_rdf.py","text":"<p>Plots radial distribution function (RDF) showing pair correlations.</p> <p>Input File: <code>rdf.out</code></p> <p>Usage:</p> <pre><code># Plot all RDF pairs\ngpumdkit.sh -plt rdf               # Display all\n\n# Plot specific column\ngpumdkit.sh -plt rdf &lt;column&gt;      # Display specific pair\n</code></pre> <p>Full RDF output: </p> <p>Single pair RDF:</p>"},{"location":"plot_scripts.html#plt_chargepy","title":"plt_charge.py","text":"<p>Plots charge distribution in <code>charge_train.out</code> from <code>qNEP</code> model.</p> <p>Input File: <code>charge_train.out</code></p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt charge\n</code></pre> <p>Important: Ensure consistency between training set and charge output atom ordering. Use full batch training or run prediction step first.</p>"},{"location":"plot_scripts.html#extra-analysis","title":"\ud83e\uddec Extra Analysis","text":"<p>Specialized scripts for some analysis.</p>"},{"location":"plot_scripts.html#plt_descriptorspy","title":"plt_descriptors.py","text":"<p>Visualizes high-dimensional descriptors using dimensionality reduction (PCA/UMAP).</p> <p>Input Files: <code>descriptors.npy</code> (generated by <code>calc_descriptors.py</code>)</p> <p>Usage:</p> <pre><code># First generate descriptors\ngpumdkit.sh -calc des train.xyz descriptors.npy nep.txt Li\n\n# Then plot\ngpumdkit.sh -plt des &lt;method&gt;\n</code></pre> <p>Methods: - <code>pca</code> - Principal Component Analysis - <code>umap</code> - Uniform Manifold Approximation and Projection</p> <p>You need some additional modifications to get the following plot, see the code here.</p>"},{"location":"plot_scripts.html#plt_descriptors_comparepy","title":"plt_descriptors_compare.py","text":"<p>Compares descriptors from multiple training sets or models.</p>"},{"location":"plot_scripts.html#plt_dimerpy","title":"plt_dimer.py","text":"<p>Plots dimer interaction curves. Two atoms are placed in a cubic box with the length of 30 angstrom. And then, the potential energy and the force will be calculated as a function of dimer distance.</p> <p>Usage: <pre><code>gpumdkit.sh -plt dimer &lt;element1&gt; &lt;element2&gt; &lt;nepmodel&gt;\n</code></pre></p> <p>Example: <pre><code>gpumdkit.sh -plt dimer Li Li nep.txt\n</code></pre></p> <p>Reference: arXiv:2504.15925</p>"},{"location":"plot_scripts.html#plt_doaspy","title":"plt_doas.py","text":"<p>Plots density of atomistic states (DOAS) proposed by Wang et al..</p> <p>Input Files: <code>doas.out</code> file calculated by <code>gpumdkit.sh -calc doas</code></p> <p>Usage:</p> <pre><code>gpumdkit.sh -plt doas &lt;doas.out&gt; &lt;species&gt;\ngpumdkit.sh -plt doas doas.out Li\n</code></pre>"},{"location":"plot_scripts.html#plt_net_forcepy","title":"plt_net_force.py","text":"<p>Plots distribution of net forces on structures, useful for identifying problematic configurations.</p> <p>Usage: <pre><code>gpumdkit.sh -plt net_force &lt;extxyzfile&gt;\ngpumdkit.sh -plt net_force train.xyz\n</code></pre></p> <p>Reference: arXiv:2510.19774</p>"},{"location":"plot_scripts.html#quick-reference-table","title":"Quick Reference Table","text":"Command Input File(s) Description <code>thermo</code> <code>thermo.out</code> Thermodynamic properties evolution <code>train</code> <code>loss.out</code>, <code>*_train.out</code> NEP training plot <code>prediction</code> <code>*_test.out</code> NEP prediction plot <code>train_test</code> <code>*_train.out</code>, <code>*_test.out</code> parity plots of train&amp;test <code>msd</code> <code>msd.out</code> Mean square displacement <code>sdc</code> <code>msd.out</code> Self-diffusion coefficient <code>rdf</code> <code>rdf.out</code> Radial distribution function <code>vac</code> <code>vac.out</code> Velocity autocorrelation <code>charge</code> <code>charge_train.out</code> Charge distribution <code>doas</code> DOAS files Density of atomistic states <code>des</code> <code>descriptors.npy</code> Descriptor visualization <code>dimer</code> Needs nep model Dimer interaction curve <code>force_errors</code> <code>force_train.out</code> Force error metrics <code>lr</code> <code>loss.out</code> from <code>gnep</code> Learning rate <code>restart</code> <code>nep.restart</code> from <code>nep</code> Restart file parameters <code>net_force</code> train.xyz Net force distribution <code>emd</code> EMD outputs EMD thermal conductivity <code>nemd</code> NEMD outputs NEMD thermal transport <code>hnemd</code> HNEMD outputs HNEMD thermal transport <code>arrhenius_d</code> Multiple MSD Arrhenius diffusivity <code>arrhenius_sigma</code> Conductivity data Arrhenius conductivity"},{"location":"plot_scripts.html#contributing","title":"Contributing","text":"<p>To add new plotting scripts:</p> <ol> <li>Create script following naming conventions</li> <li>Add documentation to this README</li> <li>Update gpumdkit.sh to integrate new plot type</li> </ol> <p>See CONTRIBUTING.md for detailed guidelines.</p> <p>Thank you for using GPUMDkit! If you have any questions, need further assistance, or want to contribute new plotting scripts, feel free to open an issue on our GitHub repository or contact Zihan YAN (yanzihan@westlake.edu.cn).</p>"},{"location":"sample_structures.html","title":"Sample Structures","text":"\ud83d\udce6 Structure Sampling <p>This directory (Scripts/sample_structures/) contains tools for sampling, selecting, and generating atomic structures for NEP training and molecular dynamics simulations.</p> <p>Script Location: <code>Scripts/sample_structures/</code></p> <p>This section covers the structure sampling tools in GPUMDkit (Interactive Mode - Option 2).</p> <p>Structure sampling is crucial for creating diverse configurations. These scripts provide:</p> <ul> <li>Uniform and random sampling: Basic sampling methods</li> <li>FPS (Farthest Point Sampling): Maximizing structural diversity using PyNEP or NEPtrain</li> <li>Structure perturbation: Generating variations for training set augmentation</li> <li>maximum force deviations selection: Identifying structures with maximum force deviations</li> <li>Frame extraction: Selecting specific range from trajectories</li> </ul>"},{"location":"sample_structures.html#interactive-mode","title":"Interactive Mode","text":"<pre><code>gpumdkit.sh\n# Select: 2) Sample Structures\n</code></pre> <p>You'll see the following menu:</p> <pre><code> ------------&gt;&gt;\n 201) Sample structures from extxyz\n 202) Sample structures by pynep\n 203) Sample structures by neptrain\n 204) Perturb structure\n 205) Select max force deviation structs\n 000) Return to the main menu\n ------------&gt;&gt;\n Input the function number:\n</code></pre>"},{"location":"sample_structures.html#option-201-sample-structures-from-extxyz","title":"Option 201: Sample Structures from extxyz","text":"<p>This option allows you to sample structures from an <code>extxyz</code> file using a specified method.</p> <p>Select option <code>201</code> from the menu:</p> <pre><code>201\n</code></pre> <p>You will see the following prompt:</p> <pre><code> &gt;-------------------------------------------------&lt;\n | Calling the script in Scripts/sample_structures |\n | Script: sample_structures.py                    |\n | Developer: Zihan YAN (yanzihan@westlake.edu.cn) |\n &gt;-------------------------------------------------&lt;\n Input &lt;extxyz_file&gt; &lt;sampling_method&gt; &lt;num_samples&gt; [skip_num]\n [skip_num]: number of initial frames to skip, default value is 0\n Sampling_method: 'uniform' or 'random'\n Examp: train.xyz uniform 50\n ------------&gt;&gt;\n</code></pre> <p>Enter the <code>extxyz</code> file name, sampling method, and number of samples:</p> <pre><code>train.xyz uniform 50\n</code></pre> <p>The script <code>sample_structures.py</code> in the <code>Scripts/sample_strcutures</code> will be called to perform the sampling.</p>"},{"location":"sample_structures.html#option-202-sample-structures-by-pynep","title":"Option 202: Sample structures by pynep","text":"<p>This function calls the <code>pynep_select_structs.py</code> in the <code>Scripts/sample_structures</code> to sampling the structures by <code>pynep</code>.</p> <p>Select option <code>202</code> from the menu:</p> <pre><code>202\n</code></pre> <p>You will see the following prompt:</p> <pre><code> +-------------------------------------------------+\n | PyNEP package is no longer actively maintained  |\n |       Recommend using function 203 instead      |\n +-------------------------------------------------+\n +-------------------------------------------------+\n |     To use parallel version, please use:        |\n |            gpumdkit.sh -pynep                   |\n +-------------------------------------------------+\n &gt;-------------------------------------------------&lt;\n | Calling the script in Scripts/sample_structures |\n | Script: pynep_select_structs.py                 |\n | Developer: Zihan YAN (yanzihan@westlake.edu.cn) |\n &gt;-------------------------------------------------&lt;\n Input &lt;sample.xyz&gt; &lt;train.xyz&gt; &lt;nep_model&gt;\n Examp: dump.xyz train.xyz nep.txt\n ------------&gt;&gt;\n</code></pre> <p><code>&lt;samle.xyz&gt;</code>: extxyz file</p> <p><code>&lt;train.xyz&gt;</code>: train.xyz</p> <p><code>&lt;nep_model&gt;</code>: nep.txt</p> <p>Enter the following parameters:</p> <pre><code>dump.xyz train.xyz nep.txt\n</code></pre> <p>Note: pynep package is no longer actively maintained, this function will be removed soon.</p>"},{"location":"sample_structures.html#option-203-sample-structures-by-neptrain","title":"Option 203: Sample structures by neptrain","text":"<p>This function calls the <code>neptrain_select_structs.py</code> script in the <code>Scripts/sample_structures</code> to sampling the structures by <code>neptrain</code></p> <p>Select option <code>203</code> from the menu:</p> <pre><code>203\n</code></pre> <p>You will see the following prompt:</p> <pre><code> &gt;-------------------------------------------------&lt;\n | Calling the script in Scripts/sample_structures |\n | Script: neptrain_select_structs.py              |\n | Developer: Benrui TANG (tang070205@proton.me)   |\n &gt;-------------------------------------------------&lt;\n Input &lt;sample.xyz&gt; &lt;train.xyz&gt; &lt;nep_model&gt;\n Examp: dump.xyz train.xyz nep.txt\n ------------&gt;&gt;\n</code></pre> <p>It is the same with option <code>202</code>.</p>"},{"location":"sample_structures.html#option-204-perturb-structure","title":"Option 204: Perturb structure","text":"<p>This function calls the <code>perturb_structure.py</code> script  in the <code>Scripts/sample_structures</code>  to generate the perturbed structures.</p> <p>Select option <code>204</code> from the menu:</p> <pre><code>204\n</code></pre> <p>You will see the following prompt:</p> <pre><code>&gt;-------------------------------------------------&lt;\n| This function calls the script in Scripts       |\n| Script: perturb_structure.py                    |\n| Developer: Zihan YAN (yanzihan@westlake.edu.cn) |\n&gt;-------------------------------------------------&lt;\nInput &lt;input.vasp&gt; &lt;pert_num&gt; &lt;cell_pert_fraction&gt; &lt;atom_pert_distance&gt; &lt;atom_pert_style&gt;\nThe default paramters for perturb are 20 0.03 0.2 uniform\nExamp: POSCAR 20 0.03 0.2 normal\n------------&gt;&gt;\n</code></pre> <p><code>&lt;input.vasp&gt;</code>: filename.vasp</p> <p><code>&lt;pert_num&gt;</code>: number of perturbed structures</p> <p><code>&lt;cell_pert_fraction&gt;</code>: A fraction determines how much (relatively) will cell deform</p> <p><code>&lt;atom_pert_distance&gt;</code>: A distance determines how far atoms will move (in angstrom).</p> <p><code>&lt;atom_pert_style&gt;</code>: <code>&lt;uniform&gt;</code>, <code>&lt;normal&gt;</code>, <code>&lt;const&gt;</code></p> <p>Enter your parameters like:</p> <pre><code>POSCAR 20 0.03 0.2 uniform\n</code></pre> <p>The script <code>perturb_structure.py</code> in the <code>Scripts/sample_strcutures</code> will be called to perform the perturbation.</p>"},{"location":"sample_structures.html#option-205-select-max-force-deviation-structs-from-activexyz","title":"Option 205: Select max force deviation structs from active.xyz","text":"<p>This option allows you to select max force deviation structures from <code>active.xyz</code> generated by the command <code>active</code> in <code>gpumd</code>.</p> <p>Select option <code>205</code> from the menu:</p> <pre><code>205\n</code></pre> <p>You will see the following prompt:</p> <pre><code> &gt;-------------------------------------------------&lt;\n | Calling the script in Scripts/sample_structures |\n | Script: select_max_modev.py                     |\n | Developer: Zihan YAN (yanzihan@westlake.edu.cn) |\n &gt;-------------------------------------------------&lt;\n +----------------------------------------------------+\n | Select max force deviation structs from active.xyz |\n |     generated by the active command in gpumd.      |\n +----------------------------------------------------+\n Input &lt;structs_num&gt; &lt;threshold&gt; (eg. 200 0.15)\n ------------&gt;&gt;\n</code></pre> <p>Enter the number of structures and the <code>threshold</code> used in your <code>run.in</code>:</p> <pre><code>200 0.15\n</code></pre> <p>The script <code>select_max_modev.py</code> in the <code>Scripts/sample_strcutures</code> will be called to perform the sampling.</p>"},{"location":"sample_structures.html#contributing","title":"Contributing","text":"<p>See CONTRIBUTING.md for detailed guidelines.</p> <p>Thank you for using GPUMDkit! If you have questions about structure sampling, please open an issue on our GitHub repository or contact Zihan YAN (yanzihan@westlake.edu.cn).</p>"},{"location":"tutorials.html","title":"GPUMDkit Tutorials","text":"<p>Welcome to GPUMDkit!</p>"},{"location":"tutorials.html#what-is-gpumdkit","title":"What is GPUMDkit?","text":"<p>GPUMDkit is a powerful command-line toolkit that streamlines your tasks for GPUMD and NEP. It provides:</p> <ul> <li>\ud83c\udfaf Two Usage Modes: Interactive mode and command-line mode</li> <li>\ud83d\udd04 Format Conversion: Convert between VASP, LAMMPS, CP2K, CASTEP, ABACUS, and extxyz formats.</li> <li>\ud83d\udcca Visualization: Comprehensive plotting tools for NEP training, MD simulations, and analysis.</li> <li>\ud83e\uddee Calculators: Compute ionic conductivity, descriptors, etc.</li> <li>\ud83d\udd0d Analysis Tools: Structure validation, filtering, composition analysis, and quality checks, etc.</li> <li>\u2699\ufe0f Workflow Automation: Batch processing for DFT calculations and MD simulations.</li> <li>\ud83e\udd16 Active Learning: Semi-Automated NEP model training workflow.</li> </ul>"},{"location":"tutorials.html#quick-start","title":"Quick Start","text":""},{"location":"tutorials.html#installation","title":"Installation","text":"<pre><code># 1. Clone the repository\ngit clone https://github.com/zhyan0603/GPUMDkit.git\n\n# 2. Add to your ~/.bashrc\nexport GPUMDkit_path=/path/to/GPUMDkit\nexport PATH=${GPUMDkit_path}:${PATH}\nsource ${GPUMDkit_path}/Scripts/utils/completion.sh\n\n# 3. Reload your shell\nsource ~/.bashrc\n\n# 4. Make executable\ncd ${GPUMDkit_path}\nchmod +x gpumdkit.sh\n</code></pre>"},{"location":"tutorials.html#two-ways-to-use-gpumdkit","title":"Two Ways to Use GPUMDkit","text":""},{"location":"tutorials.html#interactive-mode-beginner-friendly","title":"\ud83d\uddb1\ufe0f Interactive Mode (Beginner-Friendly)","text":"<p>Launch the interactive menu: <pre><code>gpumdkit.sh\n</code></pre></p> <p>You'll see: <pre><code>         ____ ____  _   _ __  __ ____  _    _ _\n        / ___|  _ \\| | | |  \\/  |  _ \\| | _(_) |_\n       | |  _| |_) | | | | |\\/| | | | | |/ / | __|\n       | |_| |  __/| |_| | |  | | |_| |   &lt;| | |_\n        \\____|_|    \\___/|_|  |_|____/|_|\\_\\_|\\__|\n\n        GPUMDkit Version 1.4.2 (dev) (2025-12-17)\n  Core Developer: Zihan YAN (yanzihan@westlake.edu.cn)\n\n ----------------------- GPUMD -----------------------\n 1) Format Conversion          2) Sample Structures\n 3) Workflow                   4) Calculators\n 5) Analyzer                   6) Developing ...\n 0) Quit!\n ------------&gt;&gt;\n Input the function number:\n</code></pre></p> <p>Best for:</p> <ul> <li>Learning GPUMDkit features</li> <li>Complex multi-step tasks</li> <li>When you need guided prompts</li> </ul>"},{"location":"tutorials.html#command-line-mode","title":"\u26a1 Command-Line Mode","text":"<p>Direct command execution: <pre><code>gpumdkit.sh -h\n</code></pre></p> <p>You will see:</p> <pre><code>+==================================================================================================+\n|                              GPUMDkit 1.4.2 (dev) (2025-12-17) Usage                             |\n+======================================== Conversions =============================================+\n| -out2xyz       Convert OUTCAR to extxyz       | -pos2exyz     Convert POSCAR to extxyz           |\n| -cif2pos       Convert cif to POSCAR          | -pos2lmp      Convert POSCAR to LAMMPS           |\n| -cif2exyz      Convert cif to extxyz          | -lmp2exyz     Convert LAMMPS-dump to extxyz      |\n| -addgroup      Add group label                | -addweight    Add weight to the struct in extxyz |\n| Developing...                                 | Developing...                                    |\n+========================================= Analysis ===============================================+\n| -range         Print range of energy etc.     | -max_rmse     Get max RMSE from extxyz           |\n| -min_dist      Get min_dist between atoms     | -min_dist_pbc Get min_dist considering PBC       |\n| -filter_box    Filter struct by box limits    | -filter_value Filter struct by value (efs)       |\n| -filter_dist   Filter struct by min_dist      | -analyze_comp Analyze composition of extxyz      |\n| -pynep         Sample struct by pynep         | Developing...                                    |\n+====================================== Misc Utilities ============================================+\n| -plt           Plot scripts                   | -get_frame     Extract the specified frame       |\n| -calc          Calculators                    | -clean_xyz     Clean extra info in XYZ file      |\n| -clean         Clear files for work_dir       | -time          Time consuming Analyzer           |\n| -update        Update GPUMDkit                | Developing...                                    |\n+==================================================================================================+\n| For detailed usage and examples, use: gpumdkit.sh -&lt;option&gt; -h                                   |\n+==================================================================================================+\n</code></pre> <p>Best for:</p> <ul> <li>Quick one-off operations</li> <li>Scripting and automation</li> <li>Batch processing</li> </ul>"},{"location":"tutorials.html#some-functionalities","title":"Some Functionalities","text":""},{"location":"tutorials.html#1-format-conversion","title":"1. Format Conversion","text":"<p>Convert structure files between different formats:</p>"},{"location":"tutorials.html#interactive-mode-option-1","title":"Interactive mode (option 1)","text":"<pre><code> ------------&gt;&gt;\n 101) Convert VASP to extxyz\n 102) Convert mtp to extxyz\n 103) Convert CP2K to extxyz\n 104) Convert ABACUS to extxyz\n 105) Convert extxyz to POSCAR\n 000) Return to the main menu\n ------------&gt;&gt;\n Input the function number:\n</code></pre>"},{"location":"tutorials.html#command-line-mode_1","title":"Command-line mode","text":"<pre><code># VASP \u2192 extxyz\ngpumdkit.sh -out2xyz &lt;dir&gt;\n\n# POSCAR \u2192 extxyz\ngpumdkit.sh -pos2exyz POSCAR model.xyz\n\n# CIF \u2192 extxyz\ngpumdkit.sh -cif2exyz input.cif model.xyz\n\n# LAMMPS \u2192 extxyz\ngpumdkit.sh -lmp2exyz dump.lammpstrj Li Y Cl\n\n# Add group labels\ngpumdkit.sh -addgroup POSCAR Li Y Cl\n\n# Add weights to structures\ngpumdkit.sh -addweight train.xyz weighted.xyz 2.0\n</code></pre> <p>\ud83d\udcd6 Learn more: Format Conversion Guide</p>"},{"location":"tutorials.html#2-structure-sampling","title":"2. Structure Sampling","text":"<p>Select diverse structures for training:</p>"},{"location":"tutorials.html#interactive-mode-option-2","title":"Interactive mode (option 2)","text":"<pre><code> ------------&gt;&gt;\n 201) Sample structures from extxyz\n 202) Sample structures by pynep\n 203) Sample structures by neptrain\n 204) Perturb structure\n 205) Select max force deviation structs\n 000) Return to the main menu\n ------------&gt;&gt;\n Input the function number:\n</code></pre> <p>\ud83d\udcd6 Learn more: Structure Sampling Guide</p>"},{"location":"tutorials.html#3-workflow","title":"3. Workflow","text":"<p>Batch processing for high-throughput calculations:</p>"},{"location":"tutorials.html#interactive-mode-option-3","title":"Interactive mode (option 3)","text":"<pre><code> ------------&gt;&gt;\n 301) SCF batch pretreatment\n 302) MD sample batch pretreatment (gpumd)\n 303) MD sample batch pretreatment (lmp)\n 000) Return to the main menu\n ------------&gt;&gt;\n Input the function number:\n</code></pre> <p>\ud83d\udcd6 Learn more: Workflow Guide | Active Learning</p>"},{"location":"tutorials.html#4-calculators","title":"4. Calculators","text":"<p>Compute material properties:</p>"},{"location":"tutorials.html#interactive-mode-option-4","title":"Interactive mode (option 4)","text":"<pre><code> ------------&gt;&gt;\n 401) Calc ionic conductivity\n 402) Calc properties by nep\n 403) Calc descriptors of specific elements\n 404) Calc density of atomistic states (DOAS)\n 405) Calc nudged elastic band (NEB) by nep\n 000) Return to the main menu\n ------------&gt;&gt;\n Input the function number:\n</code></pre>"},{"location":"tutorials.html#command-line-mode_2","title":"Command-line mode","text":"<pre><code># Ionic conductivity from MSD\ngpumdkit.sh -calc ionic-cond Li 1\n\n# Calculate descriptors\ngpumdkit.sh -calc des train.xyz desc.npy nep.txt Li\n\n# Density of atomistic states\ngpumdkit.sh -calc doas structures.xyz nep.txt doas.txt\n</code></pre> <p>\ud83d\udcd6 Learn more: Calculators Guide</p>"},{"location":"tutorials.html#5-structure-analysis","title":"5. Structure Analysis","text":"<p>Validate and filter structure files:</p>"},{"location":"tutorials.html#interactive-mode-option-5","title":"Interactive mode (option 5)","text":"<pre><code> ------------&gt;&gt;\n 501) Analyze composition of extxyz\n 502) Find outliers of extxyz\n 000) Return to the main menu\n ------------&gt;&gt;\n Input the function number:\n</code></pre>"},{"location":"tutorials.html#command-line-mode_3","title":"Command-line mode","text":"<pre><code># Check data quality\ngpumdkit.sh -range train.xyz force\ngpumdkit.sh -min_dist_pbc dump.xyz\ngpumdkit.sh -analyze_comp train.xyz\n</code></pre> <p>\ud83d\udcd6 Learn more: Analyzer Guide</p>"},{"location":"tutorials.html#6-visualization-plotting","title":"6. Visualization &amp; Plotting","text":"<p>Visualize simulation results and training data:</p> <pre><code># NEP Training\ngpumdkit.sh -plt train           # Training plot\ngpumdkit.sh -plt prediction      # Prediction plot\ngpumdkit.sh -plt force_errors    # Force error analysis\n\n# MD Simulations\ngpumdkit.sh -plt thermo          # Thermo info\ngpumdkit.sh -plt msd             # Mean square displacement\ngpumdkit.sh -plt rdf             # Radial distribution function\n\n# Transport Properties\ngpumdkit.sh -plt sdc             # Self-diffusion coefficient\ngpumdkit.sh -plt emd             # Thermal conductivity\n</code></pre> <p>\ud83d\udcd6 Learn more: Plot Scripts Guide</p>"},{"location":"tutorials.html#detailed-topic-guides","title":"Detailed Topic Guides","text":"<p>For in-depth information on specific topics:</p> <ul> <li>\ud83d\udcc4 Format Conversion - Converting between file formats</li> <li>\ud83d\udcca Plot Scripts - Visualization and plotting</li> <li>\ud83e\uddee Calculators - Property calculations</li> <li>\ud83d\udd0d Analyzer - Data analysis and quality control</li> <li>\ud83d\udce6 Structure Sampling - Sampling methods and strategies</li> <li>\u2699\ufe0f Workflow Automation - Batch processing</li> <li>\ud83e\udd16 Active Learning - NEP model improvement</li> <li>\ud83d\udd27 Custom Commands - Extending GPUMDkit</li> </ul>"},{"location":"tutorials.html#advanced-features","title":"Advanced Features","text":""},{"location":"tutorials.html#custom-commands","title":"Custom Commands","text":"<p>Extend GPUMDkit with your own shortcuts by editing <code>~/.gpumdkit.in</code>:</p> <pre><code>custom_quick_analyze() {\n    gpumdkit.sh -range \"$1\" force\n}\n</code></pre> <p>Then use: <code>gpumdkit.sh -quick_analyze train.xyz</code></p> <p>Learn more: Custom Commands Guide</p>"},{"location":"tutorials.html#scripting-with-gpumdkit","title":"Scripting with GPUMDkit","text":"<p>GPUMDkit commands work great in shell scripts:</p> <pre><code>#!/bin/bash\nfor temp in 600 900 1200; do\n    cd temp_${temp}/\n    gpumdkit.sh -plt thermo save\n    gpumdkit.sh -plt msd save\n    (echo 201; echo \"dump.xyz random 50\") | gpumdkit.sh &gt; /dev/null\n    cd ..\ndone\n</code></pre> <p>\ud83c\udf89 Ready to get started? Try the interactive mode: <code>gpumdkit.sh</code></p> <p>Thank you for using GPUMDkit! For questions or feedback, please contact Zihan YAN (yanzihan@westlake.edu.cn) or open an issue on GitHub.</p>"},{"location":"workflow.html","title":"Workflow","text":"\ud83d\udd27 Workflow <p>This directory (Scripts/workflow/) contains automation scripts for high-throughput computational workflows, particularly for NEP model development and active learning cycles.</p> <p>Script Location: <code>Scripts/workflow/</code></p> <p>This section covers the workflow automation tools in GPUMDkit (Interactive Mode - Function 3).</p> <p>Workflow scripts automate repetitive tasks in computational materials research:</p> <ul> <li>SCF Batch preprocessin: Set up VASP/CP2K single-point energy calculations</li> <li>MD sampling: Prepare molecular dynamics simulations with GPUMD/LAMMPS</li> </ul>"},{"location":"workflow.html#interactive-mode","title":"Interactive Mode","text":"<pre><code>gpumdkit.sh\n# Select: 3) Workflow\n</code></pre> <p>You'll see the following menu:</p> <pre><code> ------------&gt;&gt;\n 301) SCF batch pretreatment\n 302) MD sample batch pretreatment (gpumd)\n 303) MD sample batch pretreatment (lmp)\n 000) Return to the main menu\n ------------&gt;&gt;\n</code></pre>"},{"location":"workflow.html#option-301-scf-batch-pretreatment","title":"Option 301: SCF batch pretreatment","text":"<p>This script automates the preprocessing of <code>POSCAR</code> or <code>extxyz</code> files for self-consistent field (<code>SCF</code>) calculations. The script includes the following steps:</p> <ol> <li>Converts a <code>.xyz</code> file to <code>POSCAR</code> format using <code>GPUMDkit</code> if no <code>.vasp</code> files are found in the current directory.</li> <li>Renames and organizes <code>.vasp</code> files into a <code>struct_fp</code> directory.</li> <li>Creates individual directories for each <code>POSCAR</code> file, setting up symbolic links to the necessary <code>VASP</code> input files.</li> <li>Generates a <code>presub.sh</code> script to automate running <code>VASP</code> <code>SCF</code> calculations.</li> </ol>"},{"location":"workflow.html#usage","title":"Usage","text":"<p>Ensure all <code>.vasp</code> files or a single <code>.xyz</code> file are in the current directory.</p> <p>Select option <code>301</code> from the menu:</p> <pre><code>301\n</code></pre> <p>You will see the following prompt:</p> <pre><code> ------------&gt;&gt;\n Input the function number:\n 301\n ------------&gt;&gt;\n 1) VASP scf batch pretreatment\n 2) CP2K scf batch pretreatment\n ------------&gt;&gt;\n Input the function number:\n</code></pre> <p>choose <code>1</code>or <code>2</code>:</p> <pre><code> Starting SCF batch pretreatment...\n Found 8 .vasp files.\n &gt;-------------------------------------------------&lt;\n | This function calls the script in Scripts       |\n | Script: scf_batch_pretreatment.sh               |\n | Developer: Zihan YAN (yanzihan@westlake.edu.cn) |\n &gt;-------------------------------------------------&lt;\n\n We recommend using the prefix to locate the structure.\n The folder name will be added to the second line of XYZ.\n config_type=&lt;prefix&gt;_&lt;ID&gt;\n ------------&gt;&gt;\n Please enter the prefix of directory (e.g. FAPBI3_iter01)\n</code></pre> <p>Enter the <code>prefix</code> of the folder name:</p> <pre><code>Li7La3Zr2O12_iter01\n</code></pre> <p>The script <code>scf_batch_pretreatment.sh</code> in the <code>Scripts</code> will be called to perform the pretreatment.</p> <p>You will see the following prompts:</p> <pre><code> &gt;-----------------------------------------------------&lt;\n ATTENTION: Place POTCAR, KPOINTS and INCAR in 'fp' Dir.\n ATTENTION: Place POTCAR, KPOINTS and INCAR in 'fp' Dir.\n ATTENTION: Place POTCAR, KPOINTS and INCAR in 'fp' Dir.\n &gt;-----------------------------------------------------&lt;\n</code></pre> <p>You need to prepare the <code>POTCAR</code>, <code>KPOINTS</code>, and <code>INCAR</code> files and place them in a directory named <code>fp</code>.</p>"},{"location":"workflow.html#option-302-md-sample-batch-pretreatment-gpumd","title":"Option 302: MD sample batch pretreatment (gpumd)","text":"<p>This script automates the preprocessing of <code>POSCAR</code> or <code>extxyz</code> files for MD sampling using <code>GPUMD</code>.</p> <ol> <li>If <code>.vasp</code> files are found in the current directory, it will convert them to <code>extxyz</code> format to prepare the <code>model.xyz</code> file for <code>GPUMD</code>. If <code>.vasp</code> files are not found, the <code>.xyz</code> file will be read and all frames in it will be split into a individual sample.</li> <li>Renames and organizes <code>.xyz</code> files into a <code>struct_md</code> directory.</li> <li>Creates individual directories for each <code>model.xyz</code> file, setting up symbolic links to the necessary <code>GPUMD</code> input files.</li> <li>Generates a <code>presub.sh</code> script to automate running MD simulations.</li> </ol>"},{"location":"workflow.html#usage_1","title":"Usage","text":"<p>Ensure all <code>.vasp</code> files or a single <code>.xyz</code> file are in the current directory.</p> <p>Select option <code>302</code> from the menu:</p> <pre><code>302\n</code></pre> <p>You will see the following prompt:</p> <pre><code> Starting MD sample batch pretreatment...\n No .vasp files found, but found one XYZ file.\n Converting it to model.xyz using GPUMDkit...\n All frames from \"NEP-dataset.xyz\" have been split into individual model files.\n 20 model.xyz files were generated.\n &gt;-------------------------------------------------&lt;\n | This function calls the script in Scripts       |\n | Script: md_sample_batch_pretreatment.sh         |\n | Developer: Zihan YAN (yanzihan@westlake.edu.cn) |\n &gt;-------------------------------------------------&lt;\n</code></pre> <p>You will see the following prompts:</p> <pre><code> &gt;----------------------------------------------------&lt;\n | ATTENTION: Place run_*.in and nep.txt in 'md' Dir. |\n &gt;----------------------------------------------------&lt;\n | You need to provide MD control parameter files in  |\n | the format run_*.in (e.g., run_1.in, run_2.in),    |\n | each corresponding to a sample (e.g., sample_1,    |\n | sample_2) for molecular dynamics simulations.      |\n &gt;----------------------------------------------------&lt;\n Thank you for using GPUMDkit. Have a great day!\n</code></pre> <p>You need to prepare the <code>run.in</code> and<code>nep.txt</code> files and place them in a directory named <code>md</code>.</p>"},{"location":"workflow.html#option-303-md-sample-batch-pretreatment-lmp","title":"Option 303: MD sample batch pretreatment (lmp)","text":"<p>The same with option <code>302</code>.</p>"},{"location":"workflow.html#workflow_active_learning_devsh","title":"workflow_active_learning_dev.sh","text":"<p>Implements automated active learning cycles for iterative NEP model improvement.</p> <p>Purpose: Automates the active learning pipeline:</p> <ol> <li>Generate candidate structures (MD sampling)</li> <li>Evaluate with current NEP model</li> <li>Select uncertain structures</li> <li>Run DFT calculations</li> <li>Add to training set</li> <li>Retrain NEP model</li> </ol> <p>Status: Development version - under active development</p> <p>Documentation: See detailed tutorial in docs/tutorials/</p>"},{"location":"workflow.html#contributing","title":"Contributing","text":"<p>To add new workflow capabilities, see CONTRIBUTING.md for detailed guidelines.</p> <p>Thank you for using GPUMDkit! For questions about workflows or to share your workflow adaptations, please open an issue on our GitHub repository or contact Zihan YAN (yanzihan@westlake.edu.cn).</p>"},{"location":"workflow_active_learning.html","title":"Active Learning Workflow","text":""},{"location":"workflow_active_learning.html#tutorial-for-workflow_active_learning_devsh","title":"Tutorial for workflow_active_learning_dev.sh","text":"<p>This tutorial explains the steps and considerations involved in <code>workflow_active_learning_dev.sh</code> script. The workflow is used to generate, select, and analyze molecular structures, followed by simulations and data collection.</p>"},{"location":"workflow_active_learning.html#overview","title":"Overview","text":"<p>This script is designed to handle molecular dynamics simulations, sampling, and SCF (self-consistent field) calculations for NEP. Below is a step-by-step guide explaining how the script works and what each part does.</p>"},{"location":"workflow_active_learning.html#1-slurm-directives","title":"1. SLURM Directives","text":"<pre><code>#!/bin/bash -l\n#SBATCH -p intel-sc3,intel-sc3-32c\n#SBATCH -q huge\n#SBATCH -N 1\n#SBATCH -J workflow\n#SBATCH -o workflow.log\n#SBATCH --ntasks-per-node=1\n</code></pre> <p>The SLURM directives are used to define how the job will be submitted to the cluster:</p> <ul> <li><code>#SBATCH -p</code> defines the partition, in this case, it's <code>intel-sc3</code> and <code>intel-sc3-32c</code>.</li> <li><code>#SBATCH -q</code> specifies the queue, in this case, <code>huge</code>.</li> <li><code>#SBATCH -N</code> allocates 1 node for the job.</li> <li><code>#SBATCH -J</code> names the job <code>workflow</code>.</li> <li><code>#SBATCH -o</code> defines the output log file as <code>workflow.log</code>.</li> <li><code>--ntasks-per-node=1</code> specifies that only one task should run per node.</li> </ul> <p>NOTE: If your machine does not have the SLURM environment, you can also run the script directly from the command line. For example:</p> <pre><code>nohup bash workflow_activate_learning_dev.sh &amp;&gt;workflow.log &amp;\n</code></pre>"},{"location":"workflow_active_learning.html#2-basic-setup","title":"2. Basic Setup","text":"<pre><code>cd $SLURM_SUBMIT_DIR \n</code></pre> <p>Ensure the working directory is correct, and that all necessary files are present for the job.</p> <pre><code>source ${GPUMDkit_path}/Scripts/workflow/submit_template.sh  # Load the submit template\npython_pynep=/storage/zhuyizhouLab/yanzhihan/soft/conda/envs/gpumd/bin/python  # Python executable\n</code></pre> <ul> <li><code>GPUMDkit_path</code> is the environment variable that stores the path for the <code>GPUMDkit</code> .</li> <li><code>python_pynep</code> points to the Python environment needed for <code>pynep</code>-related scripts.</li> </ul>"},{"location":"workflow_active_learning.html#3-variable-definitions","title":"3. Variable Definitions","text":"<pre><code>work_dir=${PWD}  # Set the working directory\nprefix_name=LiF_iter01  # Prefix for calculations\nmin_dist=1.4  # Minimum atom distance\nbox_limit=13  # Simulation box limit\nmax_fp_num=50  # Maximum number of single point calculations\nsample_method=pynep  # Sampling method (options: uniform, random, pynep)\npynep_sample_dist=0.01  # Sampling distance for pynep\n</code></pre> <p>You can customize:</p> <ul> <li><code>prefix_name</code> to reflect the name of your current work.</li> <li><code>min_dist</code>, <code>box_limit</code>, and <code>max_fp_num</code> based on your own system.</li> <li><code>sample_method</code> (choose between <code>uniform</code>, <code>random</code>, or <code>pynep</code>).</li> <li><code>pynep_sample_dist</code> is the sampling distance for <code>pynep</code>.</li> </ul>"},{"location":"workflow_active_learning.html#4-check-required-files","title":"4. Check Required Files","text":"<pre><code>if [ -f nep.txt ] &amp;&amp; [ -f nep.in ] &amp;&amp; [ -f train.xyz ] &amp;&amp; [ -f run.in ] &amp;&amp; [ -f INCAR ] &amp;&amp; [ -f POTCAR ] ; then\n    # Check for the required files before proceeding.\nelse\n    echo \"Please put nep.in nep.txt train.xyz run.in INCAR POTCAR [KPOINTS] and the sample_struct.xyz in the current directory.\"\n    exit 1\nfi\n</code></pre> <p>Make sure the necessary files (<code>nep.txt</code>, <code>nep.in</code>, <code>train.xyz</code>, <code>run.in</code>, <code>INCAR</code>, <code>POTCAR</code>, <code>KPOINTS</code>) are available in the working directory. If any of these are missing, the script will terminate. <code>train.xyz</code> and <code>nep.txt</code> are used for <code>pynep</code> sampling, and <code>run.in</code> is the simulation parameters of MD in the current iteration.</p>"},{"location":"workflow_active_learning.html#5-file-organization","title":"5. File Organization","text":"<pre><code>mkdir 00.modev common\nmv ${work_dir}/{nep.txt,nep.in,*.xyz,run.in,INCAR,KPOINTS,POTCAR} ./common\ncp ${work_dir}/common/$sample_xyz_file ${work_dir}/00.modev\n</code></pre> <p>The script organizes the working files into two folders:</p> <ul> <li><code>00.modev</code>: For molecular dynamics simulation.</li> <li><code>common</code>: For shared resources such as <code>nep.txt</code>, <code>run.in</code>, and the structure files, etc.</li> </ul>"},{"location":"workflow_active_learning.html#6-molecular-dynamics-simulation-submission","title":"6. Molecular Dynamics Simulation Submission","text":"<pre><code>submit_gpumd_array modev ${sample_struct_num}\nsbatch submit.slurm\n</code></pre> <p>After preparing the input files, the script submits an array of molecular dynamics (MD) tasks using <code>submit_gpumd_array</code>.</p>"},{"location":"workflow_active_learning.html#7-monitoring-task-completion","title":"7. Monitoring Task Completion","text":"<pre><code>while true; do\n    logs=$(find \"${work_dir}/00.modev/\" -type f -name log -path \"*/sample_*/log\")\n    finished_tasks_md=$(grep \"Finished running GPUMD.\" $logs | wc -l)\n    error_tasks_md=$(grep \"Error\" $logs | wc -l)\n\n    if [ \"$error_tasks_md\" -ne 0 ]; then\n        echo \"Error: MD simulation encountered an error.\"\n        exit 1\n    fi\n    if [ $finished_tasks_md -eq $sample_struct_num ]; then\n        break\n    fi\n    sleep 30\ndone\n</code></pre> <p>The script continuously checks whether all MD tasks have finished by searching for a <code>Finished running GPUMD.</code> message in the logs. If an error is encountered, the script terminates.</p>"},{"location":"workflow_active_learning.html#8-analysis-and-filtering","title":"8. Analysis and Filtering","text":"<pre><code>mkdir ${work_dir}/01.select\n...\n</code></pre> <p>In the <code>01.select</code> folder, all structures in the trajectory file <code>dump.xyz</code> during the MD process will be analyzed and filtered to avoid the generation of non-physical structures as much as possible. Specifically, the <code>get_min_dist.py</code>, <code>filter_structures_by_distance.py</code> and <code>filter_exyz_by_box.py</code> scripts will be employed to check whether there are situations where the distance between atoms is too close or the simulated box exceeds the limit value, and such structures will be filtered out.</p>"},{"location":"workflow_active_learning.html#9-sampling-methods","title":"9. Sampling Methods","text":"<pre><code>case $sample_method in\n    \"uniform\")\n    \"random\")\n    \"pynep\")\n</code></pre> <p>The script supports three sampling methods: <code>uniform</code>, <code>random</code>, and <code>pynep</code>. It selects structures according to the chosen method and checks if the number exceeds <code>max_fp_num</code>, ensuring the final structure count is within limits.</p>"},{"location":"workflow_active_learning.html#10-scf-calculations","title":"10. SCF Calculations","text":"<pre><code>submit_vasp_array scf ${selected_struct_num} ${prefix_name}\n</code></pre> <p>After sampling, SCF calculations are submitted using <code>submit_vasp_array</code>. The process is similar to the MD submission, but for SCF calculations.</p>"},{"location":"workflow_active_learning.html#11-prediction-step","title":"11. Prediction Step","text":"<pre><code>submit_nep_prediction\n</code></pre> <p>The final step involves submitting the NEP prediction task to check  the accuracy of the NEP model. </p> <p>Thank you for using <code>GPUMDkit</code>! If you have any questions or need further assistance, feel free to open an issue on our GitHub repository or contact Zihan YAN (yanzihan@westlake.edu.cn).</p>"}]}